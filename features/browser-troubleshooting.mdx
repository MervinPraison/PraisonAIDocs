---
title: 'Browser Troubleshooting'
description: 'Diagnose and fix common browser automation issues'
icon: 'stethoscope'
---

# Browser Automation Troubleshooting

Use the `praisonai browser doctor` command to diagnose issues with your browser automation setup.

## ⚠️ Critical Issue: Gemini Nano Fallback

**Symptom:** Agent keeps returning `action: wait` without making progress.

**Root Cause:** The extension may be using Chrome's built-in **Gemini Nano** model instead of your configured LLM. Gemini Nano is a **text-only** model that does NOT support vision/screenshots.

**How to know if this is happening:**
1. Console shows: `[PraisonAI] Bridge unavailable, using local agent`
2. Console shows: `Gemini Nano ready`
3. Agent returns `wait` actions repeatedly

**Solution:** Always use the CLI to start automation:
```bash
# Correct: Uses Python server with vision-capable models
praisonai browser launch "search google for AI"

# Wrong: Side panel may fall back to Gemini Nano if bridge not connected
# (clicking "Start Agent" in side panel without bridge server running)
```

> [!IMPORTANT]
> As of v1.2.0, the Gemini Nano fallback is **disabled by default**. If the bridge server is not connected, you'll see an error message instead of the extension silently using the wrong AI model.

## Quick Diagnostics

```bash
# Full health check
praisonai browser doctor

# JSON output for scripting
praisonai browser doctor --json
```


## Common Issues

### 1. Agent Returns "wait" Action Repeatedly

**Symptom:** The agent keeps returning `action: wait` without making progress.

**Root Cause:** Usually an API key issue.

**Diagnose:**
```bash
praisonai browser doctor api-keys
praisonai browser doctor api-keys --validate
```

**Fix:**
```bash
# Set the API key for your model
export GEMINI_API_KEY="your-key-here"
# or
export OPENAI_API_KEY="your-key-here"
```

### 2. Bridge Server Not Running

**Symptom:** Extension cannot connect to server.

**Diagnose:**
```bash
praisonai browser doctor bridge
```

**Fix:**
```bash
# Start the bridge server
praisonai browser start

# Or use launch (auto-starts server)
praisonai browser launch "your goal"
```

### 3. Extension Not Found

**Symptom:** Chrome started but extension not detected.

**Diagnose:**
```bash
praisonai browser doctor extension
```

**Fix options:**

1. Use `--load-extension` flag:
```bash
# Rebuild extension
cd /path/to/praisonai-chrome-extension
npm run build

# Launch with extension
praisonai browser launch "goal" --extension /path/to/praisonai-chrome-extension/dist
```

2. Install manually at `chrome://extensions` (Developer mode → Load unpacked)

### 4. Chrome Not Running with Debug Port

**Symptom:** Cannot connect to Chrome DevTools Protocol.

**Diagnose:**
```bash
praisonai browser doctor chrome
```

**Fix:**
```bash
# Launch Chrome with debug port
google-chrome --remote-debugging-port=9222

# Or use the launch command which handles this
praisonai browser launch "search google"
```

### 5. Model Doesn't Support Vision

**Symptom:** Agent ignores screenshots, makes wrong decisions.

**Diagnose:**
```bash
praisonai browser doctor agent --model your-model-name
```

**Fix:** Use a vision-capable model:
```bash
praisonai browser launch "goal" --model gpt-4o-mini
praisonai browser launch "goal" --model gemini/gemini-2.0-flash
praisonai browser launch "goal" --model claude-3-5-sonnet-latest
```

## Doctor Command Reference

| Command | Purpose |
|---------|---------|
| `doctor` | Run all health checks |
| `doctor server` | Check bridge server HTTP health |
| `doctor chrome` | Check Chrome DevTools Protocol |
| `doctor extension` | Check if PraisonAI extension loaded |
| `doctor bridge` | Test WebSocket connectivity |
| `doctor api-keys` | Check API key configuration |
| `doctor env` | Show environment info |
| `doctor agent` | Test LLM call with mock observation |
| `doctor flow` | Full automation flow test |
| `doctor db` | Check session database |

### Options

```bash
# All doctor commands support these options
--json          # Output as JSON (for CI/CD)
--port          # Custom port

# Specific options
doctor api-keys --validate    # Actually call API to verify
doctor agent --model MODEL    # Test specific model
doctor flow --skip-llm        # Skip expensive LLM test
```

## Debug Logging

Enable verbose logging to see component-level trace:

```bash
praisonai browser launch "goal" --debug --verbose
```

Log format: `[COMPONENT][STEP] function:file message`

Example output:
```
[SERVER][MSG] _process_message:server.py type=start_session
[SERVER][START] → Sending start_automation to extension abcd1234
[AGENT][VISION] model=gpt-4o vision_capable=True use_vision=True
[SERVER][OBS] Agent returned action=click done=False
```

## Log Files

Debug sessions are logged to:
```
~/.praisonai/browser_logs/launch_YYYYMMDD_HHMMSS.log
```

Screenshots saved to:
```
~/.praisonai/browser_screenshots/YYYYMMDD_HHMMSS/
```

## Getting Help

If you're still stuck:

1. Run full diagnostics: `praisonai browser doctor flow --json > diagnostics.json`
2. Check the log file from your last run
3. Open an issue with the diagnostics output
