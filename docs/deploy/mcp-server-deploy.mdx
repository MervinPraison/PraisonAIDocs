---
title: "MCP Server Deploy"
sidebarTitle: "MCP Server"
description: "Deploy agents as Model Context Protocol (MCP) servers"
icon: "server-rack"
---

Deploy agents as MCP servers using `protocol="mcp"` in `launch()`.

## Prerequisites

```bash
pip install "praisonaiagents[mcp]"
export OPENAI_API_KEY="your-key"
```

## Single Agent MCP Server

```python
from praisonaiagents import Agent

agent = Agent(
    name="TweetAgent",
    instructions="Create tweets based on topics provided",
    llm="gpt-4o-mini"
)
agent.launch(port=8080, protocol="mcp")
```

**Expected Output:**
```
üöÄ Agent 'TweetAgent' MCP server starting on http://0.0.0.0:8080
üì° MCP SSE endpoint available at /sse
üì¢ MCP messages post to /messages/
üõ†Ô∏è Available MCP tools: execute_tweetagent_task
```

## Multi-Agent MCP Server

```python
from praisonaiagents import Agent, Agents

researcher = Agent(name="Researcher", instructions="Search for information", llm="gpt-4o-mini")
writer = Agent(name="Writer", instructions="Summarize information", llm="gpt-4o-mini")

agents = Agents(agents=[researcher, writer])
agents.launch(port=8080, protocol="mcp")
```

**Expected Output:**
```
üöÄ PraisonAIAgents MCP Workflow server starting on http://0.0.0.0:8080
üì° MCP SSE endpoint available at /sse
üì¢ MCP messages post to /messages/
üõ†Ô∏è Available MCP tools: execute_workflow
üîÑ Agents in MCP workflow: Researcher, Writer
```

## MCP with Custom Tools

```python
from praisonaiagents import Agent, Agents
from duckduckgo_search import DDGS

def internet_search(query: str):
    """Search the internet for information."""
    results = []
    ddgs = DDGS()
    for result in ddgs.text(keywords=query, max_results=5):
        results.append({
            "title": result.get("title", ""),
            "url": result.get("href", ""),
            "snippet": result.get("body", "")
        })
    return results

agent = Agent(
    name="SearchAgent",
    instructions="Search the internet for information",
    tools=[internet_search],
    llm="gpt-4o-mini"
)
agent.launch(port=8080, protocol="mcp")
```

## MCP Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/sse` | GET | SSE connection for MCP protocol |
| `/messages/` | POST | Post messages to MCP server |

## Docker Deployment

**app.py:**
```python
from praisonaiagents import Agent

agent = Agent(instructions="Create tweets", llm="gpt-4o-mini")
agent.launch(port=8080, protocol="mcp")
```

**Dockerfile:**
```dockerfile
FROM python:3.11-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
EXPOSE 8080
CMD ["python", "app.py"]
```

**requirements.txt:**
```
praisonaiagents[mcp]
```

**Build and Run:**
```bash
docker build -t mcp-server .
docker run -p 8080:8080 -e OPENAI_API_KEY=$OPENAI_API_KEY mcp-server
```

## Cloud Run Deployment

```bash
# Build and push
docker build -t gcr.io/PROJECT_ID/mcp-server .
docker push gcr.io/PROJECT_ID/mcp-server

# Deploy
gcloud run deploy mcp-server \
  --image gcr.io/PROJECT_ID/mcp-server \
  --platform managed \
  --region us-central1 \
  --allow-unauthenticated \
  --set-env-vars="OPENAI_API_KEY=$OPENAI_API_KEY"
```

## AWS ECS Deployment

```bash
# Create ECR repository
aws ecr create-repository --repository-name mcp-server

# Login to ECR
aws ecr get-login-password --region us-east-1 | \
  docker login --username AWS --password-stdin ACCOUNT_ID.dkr.ecr.us-east-1.amazonaws.com

# Tag and push
docker tag mcp-server:latest ACCOUNT_ID.dkr.ecr.us-east-1.amazonaws.com/mcp-server:latest
docker push ACCOUNT_ID.dkr.ecr.us-east-1.amazonaws.com/mcp-server:latest
```

## Connecting MCP Clients

Configure MCP clients to connect:

```json
{
  "mcpServers": {
    "praisonai": {
      "url": "http://localhost:8080/sse"
    }
  }
}
```

## Verify Deployment

```bash
# Check SSE endpoint
curl http://localhost:8080/sse

# Expected: SSE stream connection
```

## Troubleshooting

| Issue | Check |
|-------|-------|
| Port in use | `lsof -i :8080` |
| Missing deps | `pip install "praisonaiagents[mcp]"` |
| No API key | `echo $OPENAI_API_KEY` |
| SSE not connecting | Verify `/sse` endpoint is accessible |
