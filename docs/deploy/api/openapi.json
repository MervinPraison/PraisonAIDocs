{
  "openapi": "3.1.0",
  "info": {
    "title": "PraisonAI API",
    "description": "PraisonAI unified server API for agents, recipes, MCP, A2A, and A2U protocols",
    "version": "1.0.0",
    "contact": {
      "name": "PraisonAI",
      "url": "https://github.com/MervinPraison/PraisonAI"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "http://127.0.0.1:8765",
      "description": "Local development (default)"
    },
    {
      "url": "http://localhost:8765",
      "description": "Local development (localhost)"
    },
    {
      "url": "http://127.0.0.1:{port}",
      "description": "Custom port",
      "variables": {
        "port": {
          "default": "8765",
          "description": "Server port"
        }
      }
    }
  ],
  "tags": [
    {"name": "Discovery", "description": "Unified discovery endpoints"},
    {"name": "Health", "description": "Health check endpoints"},
    {"name": "Agents", "description": "Agent invocation endpoints"},
    {"name": "Recipe", "description": "Recipe runner endpoints"},
    {"name": "MCP", "description": "MCP protocol endpoints"},
    {"name": "A2A", "description": "Agent-to-Agent protocol endpoints"},
    {"name": "A2U", "description": "Agent-to-User event stream endpoints"},
    {"name": "Jobs", "description": "Async job management endpoints"}
  ],
  "paths": {
    "/__praisonai__/discovery": {
      "get": {
        "operationId": "getDiscovery",
        "summary": "Get Discovery Document",
        "description": "Returns the unified discovery document listing all available providers and endpoints",
        "tags": ["Discovery"],
        "responses": {
          "200": {
            "description": "Discovery document",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/DiscoveryDocument"},
                "example": {
                  "schema_version": "1.0.0",
                  "server_name": "praisonai-unified",
                  "server_version": "1.0.0",
                  "providers": [
                    {"type": "agents-api", "name": "Agents API", "capabilities": ["invoke", "health"]},
                    {"type": "recipe", "name": "Recipe Runner", "capabilities": ["list", "describe", "invoke"]},
                    {"type": "mcp", "name": "MCP Server", "capabilities": ["list-tools", "call-tool"]},
                    {"type": "a2a", "name": "A2A Protocol", "capabilities": ["agent-card", "message-send"]},
                    {"type": "a2u", "name": "A2U Event Stream", "capabilities": ["subscribe", "stream"]}
                  ],
                  "endpoints": []
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "operationId": "getHealth",
        "summary": "Health Check",
        "description": "Returns server health status with provider information",
        "tags": ["Health"],
        "responses": {
          "200": {
            "description": "Health status",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/HealthResponse"},
                "example": {
                  "status": "healthy",
                  "schema_version": "1.0.0",
                  "server_name": "praisonai-unified",
                  "providers": ["agents-api", "recipe", "mcp", "a2a", "a2u"],
                  "endpoint_count": 5
                }
              }
            }
          }
        }
      }
    },
    "/agents": {
      "post": {
        "operationId": "invokeAgents",
        "summary": "Invoke Agents Workflow",
        "description": "Execute an agents workflow with a query",
        "tags": ["Agents"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/AgentQuery"},
              "example": {"query": "What is the weather in Tokyo?"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Agent response",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/AgentResponse"},
                "example": {"response": "The weather in Tokyo is currently 22Â°C with clear skies."}
              }
            }
          },
          "500": {
            "description": "Error",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        }
      }
    },
    "/v1/recipes": {
      "get": {
        "operationId": "listRecipes",
        "summary": "List Recipes",
        "description": "List all available recipes",
        "tags": ["Recipe"],
        "responses": {
          "200": {
            "description": "List of recipes",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/RecipeList"},
                "example": {
                  "recipes": [
                    {"name": "research", "description": "Deep research agent"},
                    {"name": "code-review", "description": "Code review agent"}
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/recipes/{name}": {
      "get": {
        "operationId": "describeRecipe",
        "summary": "Describe Recipe",
        "description": "Get detailed information about a recipe",
        "tags": ["Recipe"],
        "parameters": [
          {
            "name": "name",
            "in": "path",
            "required": true,
            "schema": {"type": "string"},
            "description": "Recipe name"
          }
        ],
        "responses": {
          "200": {
            "description": "Recipe details",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/RecipeDetails"}
              }
            }
          },
          "404": {
            "description": "Recipe not found",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/ErrorResponse"}
              }
            }
          }
        }
      }
    },
    "/v1/recipes/run": {
      "post": {
        "operationId": "runRecipe",
        "summary": "Run Recipe (Sync)",
        "description": "Execute a recipe synchronously and return the result",
        "tags": ["Recipe"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/RecipeRunRequest"},
              "example": {
                "recipe": "research",
                "input": {"topic": "AI agents"}
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Recipe result",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/RecipeResult"}
              }
            }
          }
        }
      }
    },
    "/v1/recipes/stream": {
      "post": {
        "operationId": "streamRecipe",
        "summary": "Run Recipe (SSE Stream)",
        "description": "Execute a recipe with Server-Sent Events streaming",
        "tags": ["Recipe"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/RecipeRunRequest"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "SSE event stream",
            "content": {
              "text/event-stream": {
                "schema": {"type": "string"}
              }
            }
          }
        }
      }
    },
    "/mcp/tools": {
      "get": {
        "operationId": "listMcpTools",
        "summary": "List MCP Tools",
        "description": "List all available MCP tools",
        "tags": ["MCP"],
        "responses": {
          "200": {
            "description": "List of tools",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/McpToolList"},
                "example": {
                  "tools": [
                    {"name": "web_search", "description": "Search the web"},
                    {"name": "read_file", "description": "Read a file"}
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/mcp/tools/call": {
      "post": {
        "operationId": "callMcpTool",
        "summary": "Call MCP Tool",
        "description": "Execute an MCP tool with arguments",
        "tags": ["MCP"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/McpToolCall"},
              "example": {
                "tool": "web_search",
                "arguments": {"query": "PraisonAI documentation"}
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tool result",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/McpToolResult"}
              }
            }
          }
        }
      }
    },
    "/.well-known/agent.json": {
      "get": {
        "operationId": "getAgentCard",
        "summary": "Get A2A Agent Card",
        "description": "Returns the A2A agent card for agent discovery",
        "tags": ["A2A"],
        "responses": {
          "200": {
            "description": "Agent card",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/AgentCard"},
                "example": {
                  "name": "PraisonAI Agent",
                  "description": "PraisonAI Agent via A2A protocol",
                  "version": "1.0.0",
                  "url": "http://127.0.0.1:8765/a2a",
                  "capabilities": {
                    "streaming": true,
                    "pushNotifications": false
                  },
                  "skills": []
                }
              }
            }
          }
        }
      }
    },
    "/a2a": {
      "post": {
        "operationId": "sendA2aMessage",
        "summary": "Send A2A Message",
        "description": "Send a JSON-RPC message to the A2A agent",
        "tags": ["A2A"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/A2aRequest"},
              "example": {
                "jsonrpc": "2.0",
                "id": "1",
                "method": "message/send",
                "params": {
                  "message": {
                    "role": "user",
                    "parts": [{"type": "text", "text": "Hello, agent!"}]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "A2A response",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/A2aResponse"}
              }
            }
          }
        }
      }
    },
    "/a2u/info": {
      "get": {
        "operationId": "getA2uInfo",
        "summary": "Get A2U Server Info",
        "description": "Returns A2U server information and available event types",
        "tags": ["A2U"],
        "responses": {
          "200": {
            "description": "A2U info",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/A2uInfo"},
                "example": {
                  "name": "A2U Event Stream",
                  "version": "1.0.0",
                  "streams": ["events"],
                  "event_types": [
                    "agent.started",
                    "agent.thinking",
                    "agent.tool_call",
                    "agent.response",
                    "agent.completed",
                    "agent.error"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/a2u/subscribe": {
      "post": {
        "operationId": "subscribeA2u",
        "summary": "Subscribe to A2U Stream",
        "description": "Create a subscription to an A2U event stream",
        "tags": ["A2U"],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/A2uSubscribeRequest"},
              "example": {
                "stream": "events",
                "filters": ["agent.response", "agent.completed"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Subscription created",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/A2uSubscription"}
              }
            }
          }
        }
      }
    },
    "/a2u/events/{stream_name}": {
      "get": {
        "operationId": "streamA2uEvents",
        "summary": "Stream A2U Events",
        "description": "Subscribe and stream events via Server-Sent Events",
        "tags": ["A2U"],
        "parameters": [
          {
            "name": "stream_name",
            "in": "path",
            "required": true,
            "schema": {"type": "string", "default": "events"},
            "description": "Stream name"
          }
        ],
        "responses": {
          "200": {
            "description": "SSE event stream",
            "content": {
              "text/event-stream": {
                "schema": {"type": "string"}
              }
            }
          }
        }
      }
    },
    "/a2u/health": {
      "get": {
        "operationId": "getA2uHealth",
        "summary": "A2U Health Check",
        "description": "Returns A2U subsystem health status",
        "tags": ["A2U"],
        "responses": {
          "200": {
            "description": "A2U health status",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/A2uHealth"}
              }
            }
          }
        }
      }
    },
    "/api/v1/runs": {
      "post": {
        "operationId": "submitJob",
        "summary": "Submit Async Job",
        "description": "Submit a new job for asynchronous execution",
        "tags": ["Jobs"],
        "parameters": [
          {
            "name": "Idempotency-Key",
            "in": "header",
            "required": false,
            "schema": {"type": "string"},
            "description": "Idempotency key to prevent duplicate submissions"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/JobSubmitRequest"},
              "example": {
                "prompt": "Research AI agents",
                "agent_file": "agents.yaml",
                "framework": "praisonai"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Job accepted",
            "headers": {
              "Location": {
                "schema": {"type": "string"},
                "description": "URL to poll for status"
              },
              "Retry-After": {
                "schema": {"type": "integer"},
                "description": "Seconds before first poll"
              }
            },
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/JobSubmitResponse"}
              }
            }
          }
        }
      },
      "get": {
        "operationId": "listJobs",
        "summary": "List Jobs",
        "description": "List jobs with optional filters",
        "tags": ["Jobs"],
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "schema": {"type": "string", "enum": ["pending", "running", "succeeded", "failed", "cancelled"]},
            "description": "Filter by status"
          },
          {
            "name": "session_id",
            "in": "query",
            "schema": {"type": "string"},
            "description": "Filter by session ID"
          },
          {
            "name": "page",
            "in": "query",
            "schema": {"type": "integer", "default": 1},
            "description": "Page number"
          },
          {
            "name": "page_size",
            "in": "query",
            "schema": {"type": "integer", "default": 20, "maximum": 100},
            "description": "Jobs per page"
          }
        ],
        "responses": {
          "200": {
            "description": "Job list",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/JobListResponse"}
              }
            }
          }
        }
      }
    },
    "/api/v1/runs/{job_id}": {
      "get": {
        "operationId": "getJobStatus",
        "summary": "Get Job Status",
        "description": "Get the current status of a job",
        "tags": ["Jobs"],
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {"type": "string"},
            "description": "Job ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Job status",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/JobStatusResponse"}
              }
            }
          },
          "404": {
            "description": "Job not found"
          }
        }
      },
      "delete": {
        "operationId": "deleteJob",
        "summary": "Delete Job",
        "description": "Delete a completed job",
        "tags": ["Jobs"],
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {"type": "string"}
          }
        ],
        "responses": {
          "204": {"description": "Job deleted"},
          "404": {"description": "Job not found"},
          "409": {"description": "Job is still running"}
        }
      }
    },
    "/api/v1/runs/{job_id}/result": {
      "get": {
        "operationId": "getJobResult",
        "summary": "Get Job Result",
        "description": "Get the result of a completed job",
        "tags": ["Jobs"],
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {"type": "string"}
          }
        ],
        "responses": {
          "200": {
            "description": "Job result",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/JobResultResponse"}
              }
            }
          },
          "404": {"description": "Job not found"},
          "409": {"description": "Job not complete"}
        }
      }
    },
    "/api/v1/runs/{job_id}/cancel": {
      "post": {
        "operationId": "cancelJob",
        "summary": "Cancel Job",
        "description": "Cancel a running job",
        "tags": ["Jobs"],
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {"type": "string"}
          }
        ],
        "responses": {
          "200": {
            "description": "Job cancelled",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/JobStatusResponse"}
              }
            }
          },
          "404": {"description": "Job not found"},
          "409": {"description": "Job already complete"}
        }
      }
    },
    "/api/v1/runs/{job_id}/stream": {
      "get": {
        "operationId": "streamJob",
        "summary": "Stream Job Progress",
        "description": "Stream job progress via Server-Sent Events",
        "tags": ["Jobs"],
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {"type": "string"}
          }
        ],
        "responses": {
          "200": {
            "description": "SSE event stream",
            "content": {
              "text/event-stream": {
                "schema": {"type": "string"}
              }
            }
          },
          "404": {"description": "Job not found"}
        }
      }
    }
  },
  "components": {
    "schemas": {
      "DiscoveryDocument": {
        "type": "object",
        "properties": {
          "schema_version": {"type": "string"},
          "server_name": {"type": "string"},
          "server_version": {"type": "string"},
          "providers": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/ProviderInfo"}
          },
          "endpoints": {
            "type": "array",
            "items": {"$ref": "#/components/schemas/EndpointInfo"}
          }
        }
      },
      "ProviderInfo": {
        "type": "object",
        "properties": {
          "type": {"type": "string"},
          "name": {"type": "string"},
          "description": {"type": "string"},
          "capabilities": {"type": "array", "items": {"type": "string"}}
        }
      },
      "EndpointInfo": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "description": {"type": "string"},
          "provider_type": {"type": "string"},
          "streaming": {"type": "array", "items": {"type": "string"}}
        }
      },
      "HealthResponse": {
        "type": "object",
        "properties": {
          "status": {"type": "string"},
          "schema_version": {"type": "string"},
          "server_name": {"type": "string"},
          "providers": {"type": "array", "items": {"type": "string"}},
          "endpoint_count": {"type": "integer"}
        }
      },
      "AgentQuery": {
        "type": "object",
        "required": ["query"],
        "properties": {
          "query": {"type": "string", "description": "Query to send to agents"}
        }
      },
      "AgentResponse": {
        "type": "object",
        "properties": {
          "response": {"type": "string"}
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "error": {"type": "string"}
        }
      },
      "RecipeList": {
        "type": "object",
        "properties": {
          "recipes": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {"type": "string"},
                "description": {"type": "string"}
              }
            }
          }
        }
      },
      "RecipeDetails": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "description": {"type": "string"},
          "schema": {"type": "object"}
        }
      },
      "RecipeRunRequest": {
        "type": "object",
        "required": ["recipe"],
        "properties": {
          "recipe": {"type": "string"},
          "input": {"type": "object"}
        }
      },
      "RecipeResult": {
        "type": "object",
        "properties": {
          "result": {},
          "duration_ms": {"type": "number"}
        }
      },
      "McpToolList": {
        "type": "object",
        "properties": {
          "tools": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {"type": "string"},
                "description": {"type": "string"},
                "input_schema": {"type": "object"}
              }
            }
          }
        }
      },
      "McpToolCall": {
        "type": "object",
        "required": ["tool"],
        "properties": {
          "tool": {"type": "string"},
          "arguments": {"type": "object"}
        }
      },
      "McpToolResult": {
        "type": "object",
        "properties": {
          "result": {},
          "tool": {"type": "string"}
        }
      },
      "AgentCard": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "description": {"type": "string"},
          "version": {"type": "string"},
          "url": {"type": "string"},
          "capabilities": {"type": "object"},
          "skills": {"type": "array", "items": {"type": "object"}}
        }
      },
      "A2aRequest": {
        "type": "object",
        "required": ["jsonrpc", "method"],
        "properties": {
          "jsonrpc": {"type": "string", "enum": ["2.0"]},
          "id": {"type": "string"},
          "method": {"type": "string"},
          "params": {"type": "object"}
        }
      },
      "A2aResponse": {
        "type": "object",
        "properties": {
          "jsonrpc": {"type": "string"},
          "id": {"type": "string"},
          "result": {"type": "object"},
          "error": {"type": "object"}
        }
      },
      "A2uInfo": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "version": {"type": "string"},
          "streams": {"type": "array", "items": {"type": "string"}},
          "event_types": {"type": "array", "items": {"type": "string"}}
        }
      },
      "A2uSubscribeRequest": {
        "type": "object",
        "properties": {
          "stream": {"type": "string", "default": "events"},
          "filters": {"type": "array", "items": {"type": "string"}}
        }
      },
      "A2uSubscription": {
        "type": "object",
        "properties": {
          "subscription_id": {"type": "string"},
          "stream_name": {"type": "string"},
          "stream_url": {"type": "string"},
          "created_at": {"type": "string", "format": "date-time"}
        }
      },
      "A2uHealth": {
        "type": "object",
        "properties": {
          "status": {"type": "string"},
          "active_subscriptions": {"type": "integer"},
          "active_streams": {"type": "integer"}
        }
      },
      "JobSubmitRequest": {
        "type": "object",
        "required": ["prompt"],
        "properties": {
          "prompt": {"type": "string"},
          "agent_file": {"type": "string"},
          "agent_yaml": {"type": "string"},
          "framework": {"type": "string", "default": "praisonai"},
          "config": {"type": "object"},
          "webhook_url": {"type": "string"},
          "timeout": {"type": "integer", "default": 3600},
          "session_id": {"type": "string"},
          "idempotency_key": {"type": "string"}
        }
      },
      "JobSubmitResponse": {
        "type": "object",
        "properties": {
          "job_id": {"type": "string"},
          "status": {"type": "string"},
          "created_at": {"type": "string", "format": "date-time"},
          "poll_url": {"type": "string"},
          "stream_url": {"type": "string"}
        }
      },
      "JobStatusResponse": {
        "type": "object",
        "properties": {
          "job_id": {"type": "string"},
          "status": {"type": "string", "enum": ["pending", "running", "succeeded", "failed", "cancelled"]},
          "progress_percentage": {"type": "integer"},
          "progress_step": {"type": "string"},
          "created_at": {"type": "string", "format": "date-time"},
          "started_at": {"type": "string", "format": "date-time"},
          "completed_at": {"type": "string", "format": "date-time"}
        }
      },
      "JobResultResponse": {
        "type": "object",
        "properties": {
          "job_id": {"type": "string"},
          "status": {"type": "string"},
          "result": {},
          "error": {"type": "string"}
        }
      },
      "JobListResponse": {
        "type": "object",
        "properties": {
          "jobs": {"type": "array", "items": {"$ref": "#/components/schemas/JobStatusResponse"}},
          "total": {"type": "integer"},
          "page": {"type": "integer"},
          "page_size": {"type": "integer"}
        }
      }
    },
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-Key"
      },
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  }
}
