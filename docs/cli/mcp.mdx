---
title: "MCP (Model Context Protocol)"
sidebarTitle: "MCP"
description: "Integrate Model Context Protocol servers as tools for agents"
icon: "plug"
---

The `--mcp` flag enables integration with Model Context Protocol (MCP) servers, allowing agents to use external tools and services.

## Quick Start

```bash
praisonai "Search files" --mcp "npx -y @modelcontextprotocol/server-filesystem ."
```

## Usage

### Basic MCP Server

```bash
praisonai "List files in current directory" --mcp "npx -y @modelcontextprotocol/server-filesystem ."
```

**Expected Output:**
```
ğŸ”Œ MCP Server connected: @modelcontextprotocol/server-filesystem

â•­â”€ Agent Info â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  ğŸ‘¤ Agent: DirectAgent                                                       â”‚
â”‚  Role: Assistant                                                             â”‚
â”‚  ğŸ”§ Tools: list_directory, read_file, write_file                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Response â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Here are the files in the current directory:                                 â”‚
â”‚                                                                              â”‚
â”‚ ğŸ“ src/                                                                      â”‚
â”‚ ğŸ“ tests/                                                                    â”‚
â”‚ ğŸ“„ README.md                                                                 â”‚
â”‚ ğŸ“„ package.json                                                              â”‚
â”‚ ğŸ“„ requirements.txt                                                          â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

### MCP with Environment Variables

```bash
# Brave Search with API key
praisonai "Search for AI news" \
  --mcp "npx -y @modelcontextprotocol/server-brave-search" \
  --mcp-env "BRAVE_API_KEY=your_api_key"
```

**Expected Output:**
```
ğŸ”Œ MCP Server connected: @modelcontextprotocol/server-brave-search
ğŸ”‘ Environment variables loaded

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Response â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Here are the latest AI news articles:                                        â”‚
â”‚                                                                              â”‚
â”‚ 1. "OpenAI Announces GPT-5" - TechCrunch                                    â”‚
â”‚    https://techcrunch.com/2024/12/...                                       â”‚
â”‚                                                                              â”‚
â”‚ 2. "Google DeepMind's Latest Breakthrough" - The Verge                      â”‚
â”‚    https://theverge.com/2024/12/...                                         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

### Multiple Environment Variables

```bash
praisonai "Complex task" \
  --mcp "npx server-name" \
  --mcp-env "API_KEY=key1,SECRET=secret2,REGION=us-east-1"
```

## Popular MCP Servers

<CardGroup cols={2}>
  <Card title="Filesystem" icon="folder">
    ```bash
    --mcp "npx -y @modelcontextprotocol/server-filesystem ."
    ```
    Read, write, and list files
  </Card>
  <Card title="Brave Search" icon="magnifying-glass">
    ```bash
    --mcp "npx -y @modelcontextprotocol/server-brave-search"
    --mcp-env "BRAVE_API_KEY=xxx"
    ```
    Web search capabilities
  </Card>
  <Card title="GitHub" icon="github">
    ```bash
    --mcp "npx -y @modelcontextprotocol/server-github"
    --mcp-env "GITHUB_TOKEN=xxx"
    ```
    GitHub repository operations
  </Card>
  <Card title="PostgreSQL" icon="database">
    ```bash
    --mcp "npx -y @modelcontextprotocol/server-postgres"
    --mcp-env "DATABASE_URL=xxx"
    ```
    Database queries
  </Card>
  <Card title="Slack" icon="slack">
    ```bash
    --mcp "npx -y @modelcontextprotocol/server-slack"
    --mcp-env "SLACK_TOKEN=xxx"
    ```
    Slack messaging
  </Card>
  <Card title="Google Drive" icon="google-drive">
    ```bash
    --mcp "npx -y @anthropic/server-gdrive"
    ```
    Google Drive access
  </Card>
</CardGroup>

## Use Cases

### File Operations

```bash
praisonai "Read the README.md file and summarize it" \
  --mcp "npx -y @modelcontextprotocol/server-filesystem ."
```

### Web Research

```bash
praisonai "Research the latest developments in quantum computing" \
  --mcp "npx -y @modelcontextprotocol/server-brave-search" \
  --mcp-env "BRAVE_API_KEY=your_key"
```

### Database Queries

```bash
praisonai "Show me the top 10 customers by revenue" \
  --mcp "npx -y @modelcontextprotocol/server-postgres" \
  --mcp-env "DATABASE_URL=postgresql://user:pass@localhost/db"
```

**Expected Output:**
```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Response â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Top 10 Customers by Revenue:                                                 â”‚
â”‚                                                                              â”‚
â”‚ | Rank | Customer        | Revenue      |                                   â”‚
â”‚ |------|-----------------|--------------|                                   â”‚
â”‚ | 1    | Acme Corp       | $1,250,000   |                                   â”‚
â”‚ | 2    | TechStart Inc   | $980,000     |                                   â”‚
â”‚ | 3    | Global Systems  | $875,000     |                                   â”‚
â”‚ | ...  | ...             | ...          |                                   â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

### GitHub Operations

```bash
praisonai "List open issues in the repository" \
  --mcp "npx -y @modelcontextprotocol/server-github" \
  --mcp-env "GITHUB_TOKEN=ghp_xxx"
```

## Combine with Other Features

```bash
# MCP with metrics
praisonai "Search and analyze" --mcp "npx server" --metrics

# MCP with planning
praisonai "Complex research task" --mcp "npx server" --planning

# MCP with guardrail
praisonai "Query database" --mcp "npx postgres-server" --guardrail "Read-only queries"
```

## MCP Server Configuration

### Command Format

```bash
--mcp "command [args...]"
```

Examples:
- `--mcp "npx -y @modelcontextprotocol/server-filesystem ."`
- `--mcp "python -m mcp_server"`
- `--mcp "node ./my-server.js"`

### Environment Variables Format

```bash
--mcp-env "KEY1=value1,KEY2=value2"
```

<Warning>
Never commit API keys or secrets to version control. Use environment variables or secure secret management.
</Warning>

## Best Practices

<Tip>
Test MCP servers independently before using them with agents to ensure they're working correctly.
</Tip>

<CardGroup cols={2}>
  <Card title="Security">
    Use environment variables for sensitive credentials
  </Card>
  <Card title="Testing">
    Test MCP servers with simple commands first
  </Card>
  <Card title="Permissions">
    Grant minimum necessary permissions to MCP servers
  </Card>
  <Card title="Monitoring">
    Use `--metrics` to track MCP tool usage
  </Card>
</CardGroup>

## Troubleshooting

| Issue | Solution |
|-------|----------|
| Server not found | Ensure npx/node is installed and in PATH |
| Connection timeout | Check network connectivity and server status |
| Permission denied | Verify API keys and access permissions |
| Tool not available | Check server documentation for available tools |

## MCP Configuration Management

In addition to the `--mcp` flag, you can manage MCP server configurations using the `praisonai mcp` command.

### List Configurations

```bash
praisonai mcp list
```

**Expected Output:**
```
                         MCP Server Configurations                         
â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ Name       â”ƒ Command â”ƒ Enabled â”ƒ Scope     â”ƒ Description                â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©
â”‚ filesystem â”‚ npx     â”‚ âœ…      â”‚ workspace â”‚ Filesystem access          â”‚
â”‚ brave      â”‚ npx     â”‚ âœ…      â”‚ global    â”‚ Brave search               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Create Configuration

```bash
praisonai mcp create <name> <command> [args...]
```

**Example:**
```bash
praisonai mcp create filesystem npx -y @modelcontextprotocol/server-filesystem .
```

### Show Configuration

```bash
praisonai mcp show <name>
```

**Expected Output:**
```
MCP Config: filesystem
Command: npx
Args: -y @modelcontextprotocol/server-filesystem .
Enabled: Yes
Description: Filesystem access
```

### Enable/Disable Configuration

```bash
praisonai mcp enable <name>
praisonai mcp disable <name>
```

### Delete Configuration

```bash
praisonai mcp delete <name>
```

### Configuration File Format

MCP configs are stored as JSON files in `.praison/mcp/`:

```json
{
  "name": "filesystem",
  "command": "npx",
  "args": ["-y", "@modelcontextprotocol/server-filesystem", "."],
  "env": {
    "SOME_VAR": "value"
  },
  "enabled": true,
  "description": "Filesystem access for the agent"
}
```

### Storage Locations

| Location | Scope | Description |
|----------|-------|-------------|
| `.praison/mcp/` | Workspace | Project-specific configs |
| `~/.praison/mcp/` | Global | Shared across all projects |

### Python API

```python
from praisonaiagents.memory import MCPConfigManager

# Initialize
mcp = MCPConfigManager(workspace_path=".")

# List all configs
configs = mcp.list_configs()

# Get a specific config
config = mcp.get_config("filesystem")

# Create a config
mcp.create_config(
    name="brave-search",
    command="npx",
    args=["-y", "@modelcontextprotocol/server-brave-search"],
    env={"BRAVE_API_KEY": "$BRAVE_API_KEY"},
    description="Brave web search"
)

# Get MCP tools for agents
tools = mcp.get_mcp_tools()
```

## Related

- [MCP Overview](/mcp/transports)
- [MCP Servers](/mcp/mcp-server)
- [Custom MCP](/mcp/custom)
