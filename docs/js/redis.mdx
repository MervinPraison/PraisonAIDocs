---
title: "Redis Integration"
description: "Redis for caching, sessions, and pub/sub"
icon: "bolt"
---

# Redis Integration

PraisonAI TypeScript provides Redis adapters for caching, session storage, and pub/sub messaging.

## Quick Start

```typescript
import { createUpstashRedis, createMemoryRedis } from 'praisonai';

// Upstash Redis (serverless)
const redis = createUpstashRedis({
  url: process.env.UPSTASH_REDIS_REST_URL!,
  token: process.env.UPSTASH_REDIS_REST_TOKEN!,
  keyPrefix: 'myapp'
});

// In-memory Redis (for testing)
const memoryRedis = createMemoryRedis();
```

## Basic Operations

### Get/Set

```typescript
// Set value
await redis.set('user:123', { name: 'John', role: 'admin' });

// Set with TTL (seconds)
await redis.set('session:abc', { token: 'xyz' }, 3600);

// Get value
const user = await redis.get('user:123');
console.log(user.name); // 'John'

// Check existence
const exists = await redis.exists('user:123');

// Delete
await redis.delete('user:123');
```

### TTL Operations

```typescript
// Set expiration
await redis.expire('session:abc', 1800); // 30 minutes

// Get TTL
const ttl = await redis.ttl('session:abc');
console.log(`Expires in ${ttl} seconds`);
```

### Key Patterns

```typescript
// Find keys by pattern
const userKeys = await redis.keys('user:*');
console.log('User keys:', userKeys);
```

## Hash Operations

```typescript
// Set hash field
await redis.hset('user:123', 'email', 'john@example.com');
await redis.hset('user:123', 'role', 'admin');

// Get hash field
const email = await redis.hget('user:123', 'email');

// Get all fields
const userData = await redis.hgetall('user:123');
console.log(userData); // { email: '...', role: 'admin' }

// Delete fields
await redis.hdel('user:123', 'role');
```

## List Operations

```typescript
// Push to list (left)
await redis.lpush('queue:tasks', { id: 1, type: 'process' });

// Push to list (right)
await redis.rpush('queue:tasks', { id: 2, type: 'notify' });

// Get list range
const tasks = await redis.lrange('queue:tasks', 0, -1);

// Get list length
const length = await redis.llen('queue:tasks');
```

## Session Storage

```typescript
import { createUpstashRedis } from 'praisonai';

const redis = createUpstashRedis({ url, token });

class RedisSessionStore {
  async createSession(sessionId: string, data: any) {
    await redis.set(`session:${sessionId}`, data, 86400); // 24h
  }

  async getSession(sessionId: string) {
    return redis.get(`session:${sessionId}`);
  }

  async updateSession(sessionId: string, data: any) {
    const existing = await this.getSession(sessionId);
    await redis.set(`session:${sessionId}`, { ...existing, ...data });
  }

  async deleteSession(sessionId: string) {
    await redis.delete(`session:${sessionId}`);
  }
}
```

## Agent Memory Cache

```typescript
import { Agent, createUpstashRedis } from 'praisonai';

const redis = createUpstashRedis({ url, token });

const agent = new Agent({
  name: 'Cached Assistant',
  instructions: 'You are a helpful assistant.'
});

async function cachedChat(query: string) {
  const cacheKey = `response:${Buffer.from(query).toString('base64')}`;
  
  // Check cache
  const cached = await redis.get(cacheKey);
  if (cached) {
    console.log('Cache hit!');
    return cached;
  }
  
  // Generate response
  const response = await agent.chat(query);
  
  // Cache for 1 hour
  await redis.set(cacheKey, response, 3600);
  
  return response;
}
```

## Pub/Sub (Memory Redis)

```typescript
import { createMemoryRedis } from 'praisonai';

const redis = createMemoryRedis();

// Subscribe to channel
await redis.subscribe('events', (message) => {
  console.log('Received:', message);
});

// Publish message
await redis.publish('events', JSON.stringify({ type: 'user_joined', userId: 123 }));

// Unsubscribe
await redis.unsubscribe('events');
```

## Connection Management

```typescript
// Connect
await redis.connect();

// Check connection
if (redis.isConnected()) {
  console.log('Connected to Redis');
}

// Disconnect
await redis.disconnect();
```

## Environment Variables

```bash
# Upstash Redis
UPSTASH_REDIS_REST_URL=https://xxx.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-token
```

## Related

- [Sessions](/docs/js/sessions) - Session management
- [Database](/docs/js/database) - Other database adapters
- [Cache](/docs/js/cache) - In-memory caching
