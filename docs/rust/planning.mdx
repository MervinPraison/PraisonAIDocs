---
title: "Planning"
sidebarTitle: "Planning"
description: "Plan Mode and task management in the PraisonAI Rust SDK"
icon: "clipboard-list"
---

# Planning

The Planning module provides Plan Mode functionality similar to Cursor Plan, Windsurf Planning, and Claude Code Plan modes. Create multi-step plans with dependencies and progress tracking.

## Quick Start

```rust
use praisonai::planning::{Plan, PlanStep, StepStatus};

// Create a plan
let mut plan = Plan::new("Implement feature X");

// Add steps
plan.add_step(PlanStep::new("Research requirements"));
plan.add_step(PlanStep::new("Write tests"));
plan.add_step(PlanStep::new("Implement code"));

// Execute steps
if let Some(step) = plan.get_step_mut("step-id") {
    step.start();
    // ... do work ...
    step.complete(Some("Done!".to_string()));
}

println!("Progress: {:.1}%", plan.progress());
```

## Plan Steps

Individual steps in a plan:

```rust
use praisonai::planning::{PlanStep, StepStatus};

// Create a step
let step = PlanStep::new("Research requirements")
    .depends_on("previous-step-id")
    .estimated(300);  // 5 minutes

println!("ID: {}", step.id);
println!("Status: {:?}", step.status);
```

### Step Status

| Status | Description |
|--------|-------------|
| `Pending` | Not started |
| `InProgress` | Currently executing |
| `Completed` | Successfully finished |
| `Failed` | Execution failed |
| `Skipped` | Intentionally skipped |

### Step Lifecycle

```rust
let mut step = PlanStep::new("Task");

// Start work
step.start();
assert_eq!(step.status, StepStatus::InProgress);

// Complete successfully
step.complete(Some("Result output".to_string()));
// Or fail
step.fail("Error message");
// Or skip
step.skip();
```

### Dependencies

Steps can depend on other steps:

```rust
let step1 = PlanStep::new("First step");
let step1_id = step1.id.clone();

let step2 = PlanStep::new("Second step")
    .depends_on(&step1_id);

// Check if ready
let completed = vec![step1_id];
assert!(step2.is_ready(&completed));
```

## Plan

A collection of steps with progress tracking:

```rust
use praisonai::planning::Plan;

let mut plan = Plan::new("Project Alpha")
    .description("Main development plan");

// Add steps
plan.add_step(PlanStep::new("Design"));
plan.add_step(PlanStep::new("Implement"));
plan.add_step(PlanStep::new("Test"));

// Check progress
println!("Steps: {}", plan.step_count());
println!("Progress: {:.1}%", plan.progress());
println!("Complete: {}", plan.is_complete());
println!("Has failures: {}", plan.has_failed());

// Get next ready step
if let Some(next) = plan.next_step() {
    println!("Next: {}", next.description);
}
```

### Plan Methods

| Method | Description |
|--------|-------------|
| `new(name)` | Create new plan |
| `add_step(step)` | Add a step |
| `get_step(id)` | Get step by ID |
| `get_step_mut(id)` | Get mutable step |
| `completed_steps()` | List completed IDs |
| `next_step()` | Get next ready step |
| `progress()` | Get progress percentage |
| `is_complete()` | Check if all done |
| `has_failed()` | Check for failures |

## Todo Lists

Simple task management:

```rust
use praisonai::planning::{TodoList, TodoItem, TodoPriority};

let mut list = TodoList::new("Sprint Tasks");

// Add items
list.add(
    TodoItem::new("Fix critical bug")
        .priority(TodoPriority::Critical)
        .tag("bug")
);

list.add(
    TodoItem::new("Add feature")
        .priority(TodoPriority::Medium)
        .tag("enhancement")
);

// Query items
let critical = list.by_priority(TodoPriority::Critical);
let bugs = list.by_tag("bug");
let pending = list.pending();
let overdue = list.overdue();

println!("Progress: {:.1}%", list.progress());
```

### Priority Levels

| Priority | Description |
|----------|-------------|
| `Low` | Nice to have |
| `Medium` | Standard priority |
| `High` | Important |
| `Critical` | Must complete |

## Plan Storage

Persist plans to disk:

```rust
use praisonai::planning::PlanStorage;

// Create storage
let mut storage = PlanStorage::new();
// Or with file path
let mut storage = PlanStorage::with_path("./plans.json");

// Save a plan
let plan = Plan::new("My Plan");
let id = plan.id.clone();
storage.save(plan);

// Load a plan
if let Some(plan) = storage.load(&id) {
    println!("Loaded: {}", plan.name);
}

// List all plans
for plan in storage.list() {
    println!("{}: {}", plan.id, plan.name);
}

// Persist to disk
storage.persist()?;

// Restore from disk
storage.restore()?;
```

## Tool Safety

Control which tools are allowed in Plan Mode:

```rust
use praisonai::planning::{
    is_read_only_tool,
    is_restricted_tool,
    is_research_tool,
    READ_ONLY_TOOLS,
    RESTRICTED_TOOLS,
    RESEARCH_TOOLS,
};

// Check tool safety
assert!(is_read_only_tool("read_file"));
assert!(is_restricted_tool("write_file"));
assert!(is_research_tool("web_search"));
```

### Tool Categories

**Read-Only Tools** (allowed in plan mode):
- `read_file`, `list_directory`, `search_codebase`
- `grep_search`, `find_files`, `web_search`

**Restricted Tools** (blocked in plan mode):
- `write_file`, `delete_file`, `execute_command`
- `git_commit`, `npm_install`, `pip_install`

**Research Tools** (safe for planning):
- `web_search`, `duckduckgo_search`, `tavily_search`
- `read_url`, `fetch_url`

## Example: Agent with Planning

```rust
use praisonai::{Agent, Result};
use praisonai::planning::{Plan, PlanStep, PlanStorage};

#[tokio::main]
async fn main() -> Result<()> {
    // Create a plan
    let mut plan = Plan::new("Research Task");
    plan.add_step(PlanStep::new("Search for documentation"));
    plan.add_step(PlanStep::new("Analyze findings"));
    plan.add_step(PlanStep::new("Write summary"));
    
    // Create storage
    let mut storage = PlanStorage::new();
    storage.save(plan.clone());
    
    // Create agent
    let agent = Agent::new()
        .instructions("You help with research tasks")
        .build()?;
    
    // Execute each step
    while let Some(next) = plan.next_step() {
        println!("Executing: {}", next.description);
        
        let step_id = next.id.clone();
        if let Some(step) = plan.get_step_mut(&step_id) {
            step.start();
        }
        
        // Execute with agent
        let output = agent.chat(&next.description).await?;
        
        if let Some(step) = plan.get_step_mut(&step_id) {
            step.complete(Some(output));
        }
        
        println!("Progress: {:.1}%", plan.progress());
    }
    
    println!("Plan complete!");
    Ok(())
}
```

## Related

<CardGroup cols={2}>
  <Card title="Agent" icon="robot" href="/docs/rust/agent">
    Agent API reference
  </Card>
  <Card title="Tools" icon="wrench" href="/docs/rust/tools">
    Tool system
  </Card>
  <Card title="Agent Flow" icon="diagram-project" href="/docs/rust/agent-flow">
    Workflow patterns
  </Card>
  <Card title="Planning Concepts" icon="sitemap" href="/docs/concepts/planning">
    Planning overview
  </Card>
</CardGroup>
