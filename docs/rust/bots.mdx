---
title: "Bots"
sidebarTitle: "Bots"
description: "Messaging bot integration in the PraisonAI Rust SDK"
icon: "robot"
---

# Bots

The Bots module provides protocols and types for messaging bot implementations, enabling agents to communicate through platforms like Telegram, Discord, Slack, and more.

## Quick Start

```rust
use praisonai::bots::{BotMessage, BotUser, BotChannel, MessageType};

// Create a user
let user = BotUser::new("user-123")
    .username("john_doe")
    .display_name("John");

// Create a message
let message = BotMessage::text("Hello, bot!", user, "channel-1");

println!("From: {:?}", message.sender);
println!("Content: {:?}", message.text_content());
```

## MessageType

Types of bot messages:

| Type | Description |
|------|-------------|
| `Text` | Plain text message |
| `Image` | Image attachment |
| `Audio` | Audio message |
| `Video` | Video content |
| `File` | File attachment |
| `Location` | Location share |
| `Sticker` | Sticker |
| `Command` | Bot command (e.g., /start) |
| `Callback` | Callback query |
| `Reaction` | Emoji reaction |
| `Reply` | Reply to message |
| `Edit` | Message edit |
| `Delete` | Message deletion |

## BotUser

Represents a user in a messaging platform:

```rust
use praisonai::bots::BotUser;

let user = BotUser::new("user-456")
    .username("alice")
    .display_name("Alice Smith")
    .is_bot(false)
    .metadata("role", serde_json::json!("admin"));

println!("ID: {}", user.user_id);
println!("Username: {:?}", user.username);
println!("Display: {:?}", user.display_name);
println!("Is Bot: {}", user.is_bot);

// Serialize
let dict = user.to_dict();
```

## BotChannel

Represents a channel/chat in a messaging platform:

```rust
use praisonai::bots::BotChannel;

let channel = BotChannel::new("channel-789")
    .name("general")
    .channel_type("group")
    .metadata("members", serde_json::json!(150));

println!("Channel: {}", channel.name.unwrap_or_default());
println!("Type: {:?}", channel.channel_type);

let dict = channel.to_dict();
```

## BotMessage

Represents a message in a messaging platform:

```rust
use praisonai::bots::{BotMessage, BotUser, MessageType};

// Create user
let sender = BotUser::new("user-1").username("alice");

// Text message
let msg = BotMessage::text(
    "Hello, world!",
    sender.clone(),
    "channel-1"
);

// With attachments
let msg_with_file = BotMessage::new(serde_json::json!({
    "text": "Check this out",
    "file_url": "https://example.com/doc.pdf"
}))
    .message_type(MessageType::File)
    .sender(sender.clone())
    .channel("channel-1");

// Command message
let cmd = BotMessage::text("/help", sender.clone(), "channel-1")
    .message_type(MessageType::Command);

// Check for command
if let Some(command) = cmd.command() {
    println!("Command: {}", command);  // "help"
}

let args = cmd.command_args();  // Arguments after command
```

### BotMessage Fields

| Field | Type | Description |
|-------|------|-------------|
| `id` | String | Message ID |
| `content` | Value | Message content |
| `message_type` | MessageType | Type of message |
| `sender` | Option | Sender user |
| `channel_id` | String | Channel ID |
| `timestamp` | f64 | Unix timestamp |
| `reply_to_id` | Option | Reply-to message |
| `thread_id` | Option | Thread ID |
| `metadata` | HashMap | Extra data |

## BotAdapter Trait

Implement custom bot adapters:

```rust
use praisonai::bots::{BotAdapter, BotMessage, BotChannel};
use praisonai::error::Result;
use async_trait::async_trait;

struct DiscordAdapter {
    token: String,
    client: DiscordClient,
}

#[async_trait]
impl BotAdapter for DiscordAdapter {
    async fn send_message(&self, channel_id: &str, content: &str) -> Result<BotMessage> {
        let msg = self.client.send(channel_id, content).await?;
        Ok(msg.into())
    }
    
    async fn receive_message(&self) -> Result<Option<BotMessage>> {
        Ok(self.client.next_message().await?.map(Into::into))
    }
    
    async fn get_channel(&self, channel_id: &str) -> Result<BotChannel> {
        let ch = self.client.channel(channel_id).await?;
        Ok(ch.into())
    }
    
    fn platform(&self) -> &str {
        "discord"
    }
}
```

## BotHandler

Handle incoming bot messages:

```rust
use praisonai::bots::{BotHandler, BotMessage, BotContext};
use praisonai::Agent;

struct MyBotHandler {
    agent: Agent,
}

impl BotHandler for MyBotHandler {
    async fn handle_message(&self, ctx: BotContext, msg: BotMessage) -> Result<()> {
        // Check for commands
        if let Some(cmd) = msg.command() {
            match cmd.as_str() {
                "help" => {
                    ctx.reply("Available commands: /help, /ask").await?;
                }
                "ask" => {
                    let query = msg.command_args().join(" ");
                    let response = self.agent.chat(&query).await?;
                    ctx.reply(&response).await?;
                }
                _ => {
                    ctx.reply("Unknown command").await?;
                }
            }
            return Ok(());
        }
        
        // Handle regular messages
        let response = self.agent.chat(msg.text_content().unwrap_or("")).await?;
        ctx.reply(&response).await?;
        
        Ok(())
    }
}
```

## Example: Telegram Bot

```rust
use praisonai::bots::{BotMessage, BotUser, BotChannel, MessageType};
use praisonai::Agent;

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    let agent = Agent::new()
        .instructions("You are a helpful Telegram bot")
        .build()?;
    
    // Simulate receiving a message
    let user = BotUser::new("12345")
        .username("telegram_user")
        .display_name("John");
    
    let incoming = BotMessage::text("/ask What is Rust?", user, "chat-123")
        .message_type(MessageType::Command);
    
    // Process command
    if let Some(cmd) = incoming.command() {
        if cmd == "ask" {
            let query = incoming.command_args().join(" ");
            let response = agent.chat(&query).await?;
            
            // Create response message
            let bot_user = BotUser::new("bot-id").is_bot(true);
            let reply = BotMessage::text(&response, bot_user, "chat-123");
            
            println!("Reply: {:?}", reply.text_content());
        }
    }
    
    Ok(())
}
```

## Related

<CardGroup cols={2}>
  <Card title="Gateway" icon="tower-broadcast" href="/docs/rust/gateway">
    Real-time communication
  </Card>
  <Card title="Agent" icon="robot" href="/docs/rust/agent">
    Agent API
  </Card>
  <Card title="Streaming" icon="wave-pulse" href="/docs/rust/streaming">
    Real-time streaming
  </Card>
  <Card title="Sessions" icon="list-check" href="/docs/rust/sessions">
    Session management
  </Card>
</CardGroup>
