---
title: "Telemetry"
sidebarTitle: "Telemetry"
description: "Performance monitoring and telemetry in the PraisonAI Rust SDK"
icon: "chart-line"
---

# Telemetry

The Telemetry module provides performance monitoring and event collection for tracking agent, tool, and API performance.

## Quick Start

```rust
use praisonai::telemetry::{PerformanceMonitor, TelemetryCollector, TelemetryEvent, TelemetryEventType};
use std::time::Duration;

let monitor = PerformanceMonitor::new();

// Track function performance
monitor.track_function("process_data", Duration::from_millis(150));
monitor.track_function("process_data", Duration::from_millis(180));

// Track API calls
monitor.track_api("/api/chat", Duration::from_millis(500), true, Some(200));
monitor.track_api("/api/chat", Duration::from_millis(100), false, Some(500));

// Get report
let report = monitor.get_report();
println!("Total function calls: {}", report.total_function_calls);
```

## FunctionStats

Statistics for tracked functions:

```rust
use praisonai::telemetry::FunctionStats;
use std::time::Duration;

let mut stats = FunctionStats::new("my_function");

// Record calls
stats.record(Duration::from_millis(100));
stats.record(Duration::from_millis(200));
stats.record(Duration::from_millis(150));

println!("Calls: {}", stats.call_count);
println!("Total: {:?}", stats.total_duration);
println!("Min: {:?}", stats.min_duration);
println!("Max: {:?}", stats.max_duration);
println!("Average: {:?}", stats.average_duration());
println!("Calls/sec: {}", stats.calls_per_second(Duration::from_secs(10)));
```

| Property | Type | Description |
|----------|------|-------------|
| `name` | String | Function name |
| `call_count` | usize | Number of calls |
| `total_duration` | Duration | Total time spent |
| `min_duration` | Duration | Fastest call |
| `max_duration` | Duration | Slowest call |
| `last_duration` | Duration | Most recent call |

## ApiStats

Statistics for API endpoints:

```rust
use praisonai::telemetry::ApiStats;
use std::time::Duration;

let mut stats = ApiStats::new("/api/completions");

// Record successful calls
stats.record_success(Duration::from_millis(200), 200);
stats.record_success(Duration::from_millis(180), 200);

// Record failures
stats.record_error(Duration::from_millis(5000), Some(500));

println!("Calls: {}", stats.call_count);
println!("Success: {}", stats.success_count);
println!("Errors: {}", stats.error_count);
println!("Success rate: {:.1}%", stats.success_rate() * 100.0);
println!("Average: {:?}", stats.average_duration());
```

| Property | Type | Description |
|----------|------|-------------|
| `endpoint` | String | API endpoint |
| `call_count` | usize | Total calls |
| `success_count` | usize | Successful calls |
| `error_count` | usize | Failed calls |
| `total_duration` | Duration | Total time |
| `status_codes` | HashMap | Status code counts |

## PerformanceMonitor

Central monitor for tracking all performance:

```rust
use praisonai::telemetry::PerformanceMonitor;
use std::time::Duration;

let mut monitor = PerformanceMonitor::new();

// Enable/disable
monitor.enable();
monitor.disable();

// Track functions and APIs
monitor.track_function("parse", Duration::from_millis(10));
monitor.track_api("/api/v1/chat", Duration::from_millis(500), true, Some(200));

// Get stats
if let Some(stats) = monitor.get_function_stats("parse") {
    println!("Parse calls: {}", stats.call_count);
}

// Get slowest operations
let slowest = monitor.slowest_functions(5);
let slowest_apis = monitor.slowest_apis(5);

// Generate report
let report = monitor.get_report();
println!("Elapsed: {:?}", report.elapsed);
println!("Functions tracked: {}", report.function_count);
println!("APIs tracked: {}", report.api_count);
```

### PerformanceReport

Comprehensive performance summary:

| Field | Type | Description |
|-------|------|-------------|
| `elapsed` | Duration | Total monitoring time |
| `function_count` | usize | Tracked functions |
| `api_count` | usize | Tracked APIs |
| `total_function_calls` | usize | Sum of all function calls |
| `total_api_calls` | usize | Sum of all API calls |
| `slowest_functions` | Vec | Top 5 slowest functions |
| `slowest_apis` | Vec | Top 5 slowest APIs |

## TelemetryCollector

Collect structured events:

```rust
use praisonai::telemetry::{TelemetryCollector, TelemetryEvent, TelemetryEventType};
use std::time::Duration;

let mut collector = TelemetryCollector::new()
    .with_max_events(1000);

// Record events
collector.record(
    TelemetryEvent::new(TelemetryEventType::AgentStart)
        .with_data("agent_name", "researcher")
        .with_data("model", "gpt-4")
);

collector.record(
    TelemetryEvent::new(TelemetryEventType::ToolCall)
        .with_data("tool", "web_search")
        .with_duration(Duration::from_millis(2000))
);

collector.record(
    TelemetryEvent::new(TelemetryEventType::AgentEnd)
        .with_data("status", "success")
);

// Query events
println!("Total events: {}", collector.event_count());

let agent_events = collector.events_by_type(&TelemetryEventType::AgentStart);
println!("Agent starts: {}", agent_events.len());
```

### TelemetryEventType

| Event | Description |
|-------|-------------|
| `AgentStart` | Agent began processing |
| `AgentEnd` | Agent completed |
| `ToolCall` | Tool was invoked |
| `LlmRequest` | LLM request sent |
| `LlmResponse` | LLM response received |
| `Error` | Error occurred |
| `Custom(String)` | Custom event type |

## Global Functions

Convenience functions for global monitoring:

```rust
use praisonai::telemetry::{
    track_function,
    track_api,
    record_event,
    get_performance_report,
    get_monitor,
    get_collector,
    TelemetryEvent,
    TelemetryEventType,
};
use std::time::Duration;

// Track globally
track_function("global_fn", Duration::from_millis(50));
track_api("/api/global", Duration::from_millis(100), true, Some(200));

// Record event globally
record_event(
    TelemetryEvent::new(TelemetryEventType::Custom("custom_event".to_string()))
        .with_data("key", "value")
);

// Get global report
let report = get_performance_report();
println!("{:?}", report);

// Access global instances
let monitor = get_monitor();
let collector = get_collector();
```

## Example: Agent Performance Tracking

```rust
use praisonai::{Agent, Result};
use praisonai::telemetry::{PerformanceMonitor, TelemetryCollector, TelemetryEvent, TelemetryEventType};
use std::time::Instant;

#[tokio::main]
async fn main() -> Result<()> {
    let monitor = PerformanceMonitor::new();
    let collector = TelemetryCollector::new();
    
    let agent = Agent::new()
        .instructions("You are a helpful assistant")
        .build()?;
    
    // Track agent chat
    collector.record(TelemetryEvent::new(TelemetryEventType::AgentStart));
    let start = Instant::now();
    
    let response = agent.chat("Hello!").await?;
    
    let duration = start.elapsed();
    monitor.track_function("agent.chat", duration);
    collector.record(
        TelemetryEvent::new(TelemetryEventType::AgentEnd)
            .with_duration(duration)
            .with_data("response_len", response.len())
    );
    
    // Report
    let report = monitor.get_report();
    println!("Performance Report:");
    println!("  Total calls: {}", report.total_function_calls);
    println!("  Events: {}", collector.event_count());
    
    Ok(())
}
```

## Related

<CardGroup cols={2}>
  <Card title="Tracing" icon="code-branch" href="/docs/rust/tracing">
    Distributed tracing
  </Card>
  <Card title="Agent" icon="robot" href="/docs/rust/agent">
    Agent API
  </Card>
  <Card title="Streaming" icon="wave-pulse" href="/docs/rust/streaming">
    Real-time events
  </Card>
  <Card title="Error Handling" icon="triangle-exclamation" href="/docs/rust/error-handling">
    Error patterns
  </Card>
</CardGroup>
