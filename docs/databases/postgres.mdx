---
title: "PostgreSQL"
description: "PostgreSQL conversation store setup"
icon: "elephant"
---

# PostgreSQL

PostgreSQL is the recommended production database for conversation persistence.

## Installation

```bash
pip install "praisonai[tools]"
```

## Docker Setup

```bash
docker run -d --name praison-postgres -p 5432:5432 \
    -e POSTGRES_PASSWORD=praison123 \
    -e POSTGRES_DB=praisonai \
    postgres:16
```

## Quick Start (Agent)

```python
from praisonaiagents import Agent, db

db_instance = db(
    database_url="postgresql://postgres:praison123@localhost:5432/praisonai"
)

agent = Agent(
    name="Assistant",
    db=db_instance,
    session_id="my-session"
)

agent.chat("Hello!")
db_instance.close()
```

## URL Format

```python
from praisonaiagents import db

db_instance = db(database_url="postgresql://user:password@host:port/database")
```

## Environment Variables

```bash
export PRAISON_CONVERSATION_URL="postgresql://postgres:praison123@localhost:5432/praisonai"
```

## CLI

```bash
# Validate connection
praisonai persistence doctor \
    --conversation-url "postgresql://postgres:praison123@localhost/praisonai"

# Run with persistence
praisonai persistence run \
    --conversation-url "postgresql://postgres:praison123@localhost/praisonai" \
    --session-id "cli-session" \
    "Hello!"
```

## Schema

Tables are auto-created:
- `praison_sessions` - Session metadata
- `praison_messages` - Conversation messages

## Troubleshooting

**Connection refused:**
```bash
# Check if PostgreSQL is running
docker ps | grep postgres

# Check logs
docker logs praison-postgres
```

**Authentication failed:**
- Verify username/password
- Check `pg_hba.conf` for connection rules
