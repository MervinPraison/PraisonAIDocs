---
title: "RAG CLI"
description: "Command-line interface for RAG operations"
icon: "terminal"
---

# RAG CLI

The `praisonai rag` command group provides full RAG functionality from the command line.

## Commands

### index

Build or update an index from source documents.

```bash
praisonai rag index <sources> [options]
```

**Arguments:**
- `sources` - Files, directories, or URLs to index

**Options:**
- `--collection, -c` - Collection name (default: "default")
- `--chunking` - Chunking strategy: token, sentence, recursive, semantic
- `--chunk-size` - Chunk size in tokens (default: 512)
- `--config, -f` - Config file path
- `--verbose, -v` - Verbose output
- `--profile` - Enable performance profiling
- `--profile-out` - Save profile to JSON file
- `--profile-top` - Top N items in profile (default: 20)

<Note>
This command uses the Knowledge substrate for indexing. Equivalent to `praisonai knowledge index`.
</Note>

**Examples:**

```bash
# Index a directory
praisonai rag index ./documents

# Index specific files
praisonai rag index paper.pdf report.docx

# Index with custom collection
praisonai rag index ./data --collection research

# Index with semantic chunking
praisonai rag index ./docs --chunking semantic --chunk-size 256
```

### query

One-shot question answering with citations.

```bash
praisonai rag query "<question>" [options]
```

**Options:**
- `--collection, -c` - Collection to query (default: "default")
- `--top-k, -k` - Number of results (default: 5)
- `--citations/--no-citations` - Include citations (default: true)
- `--config, -f` - Config file path
- `--verbose, -v` - Verbose output
- `--profile` - Enable performance profiling
- `--profile-out` - Save profile to JSON file
- `--profile-top` - Top N items in profile (default: 20)

**Examples:**

```bash
# Simple query
praisonai rag query "What is the main finding?"

# Query specific collection
praisonai rag query "Summarize the methodology" --collection research

# Query with more results
praisonai rag query "List all conclusions" --top-k 10

# Query without citations
praisonai rag query "Quick summary" --no-citations
```

### chat

Interactive RAG chat session with streaming.

```bash
praisonai rag chat [options]
```

**Options:**
- `--collection, -c` - Collection to chat with (default: "default")
- `--top-k, -k` - Results per query (default: 5)
- `--config, -f` - Config file path
- `--stream/--no-stream` - Stream responses (default: true)

**Examples:**

```bash
# Start chat session
praisonai rag chat

# Chat with specific collection
praisonai rag chat --collection research

# Chat without streaming
praisonai rag chat --no-stream
```

**Chat Commands:**
- Type questions to get answers
- `exit`, `quit`, or `q` to end session
- `Ctrl+C` to interrupt

### eval

Evaluate RAG retrieval quality against golden queries.

```bash
praisonai rag eval <test_file> [options]
```

**Arguments:**
- `test_file` - JSON file with test queries

**Options:**
- `--collection, -c` - Collection to evaluate (default: "default")
- `--top-k, -k` - Results to retrieve (default: 5)
- `--output, -o` - Output results to file
- `--verbose, -v` - Verbose output
- `--profile` - Enable performance profiling
- `--profile-out` - Save profile to JSON file
- `--profile-top` - Top N items in profile (default: 20)

**Test File Format:**

```json
[
  {
    "query": "What is the main finding?",
    "expected_doc": "paper.pdf",
    "expected_answer_contains": "significant improvement"
  },
  {
    "query": "What methodology was used?",
    "expected_doc": "methods.pdf",
    "expected_answer_contains": "randomized"
  }
]
```

**Examples:**

```bash
# Run evaluation
praisonai rag eval golden_queries.json

# Evaluate with output
praisonai rag eval tests.json --output results.json

# Verbose evaluation
praisonai rag eval tests.json --verbose
```

### serve

Start RAG as a microservice API.

```bash
praisonai rag serve [options]
```

**Options:**
- `--collection, -c` - Collection to serve (default: "default")
- `--host, -h` - Host to bind (default: 127.0.0.1)
- `--port, -p` - Port to bind (default: 8080)
- `--config, -f` - Config file path

**Examples:**

```bash
# Start server
praisonai rag serve

# Serve specific collection on custom port
praisonai rag serve --collection research --port 9000

# Serve on all interfaces
praisonai rag serve --host 0.0.0.0
```

**API Endpoints:**

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/health` | GET | Health check |
| `/rag/query` | POST | Query with JSON body |
| `/rag/chat` | POST | Streaming chat |
| `/docs` | GET | OpenAPI documentation |

**Query Request:**

```json
{
  "question": "What is the main finding?",
  "top_k": 5,
  "include_citations": true
}
```

## Configuration File

Create a YAML config file for reusable settings:

```yaml
# rag_config.yaml
knowledge:
  sources:
    - ./documents
  collection: my_docs
  
  chunking:
    strategy: semantic
    chunk_size: 512
    chunk_overlap: 50
  
  vector_store:
    provider: chroma
    config:
      persist_directory: ./.praison/rag/my_docs

rag:
  top_k: 5
  min_score: 0.5
  include_citations: true
```

Use with any command:

```bash
praisonai rag query "Question" --config rag_config.yaml
```

## Environment Variables

Override settings with environment variables:

```bash
export PRAISONAI_RAG_COLLECTION=my_docs
export PRAISONAI_RAG_TOP_K=10
```

## Exit Codes

| Code | Meaning |
|------|---------|
| 0 | Success |
| 1 | Error (missing deps, config error, etc.) |

## Tips

1. **Start simple**: Use defaults, then customize
2. **Name collections**: Organize by project or topic
3. **Use config files**: For reproducible setups
4. **Check verbose output**: Debug retrieval issues
5. **Evaluate regularly**: Track quality over time
