---
title: "POST /agui API"
description: "Run agent with AG-UI streaming response"
icon: "play"
api: "POST /agui"
playground: "simple"
---

# POST /agui

Run an agent and receive a streaming response via AG-UI protocol.

## Endpoint

```
POST /agui
```

## Description

This endpoint accepts a message and returns a Server-Sent Events (SSE) stream with AG-UI protocol events. It's designed for integration with CopilotKit and similar frontend frameworks.

## Request

### Headers

| Header | Value | Required |
|--------|-------|----------|
| `Content-Type` | `application/json` | Yes |
| `Accept` | `text/event-stream` | Recommended |

### Body

```json
{
  "message": "What is machine learning?",
  "thread_id": "thread-123",
  "run_id": "run-456"
}
```

### Request Fields

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `message` | string | Yes | User message |
| `thread_id` | string | No | Thread/conversation ID |
| `run_id` | string | No | Run identifier |

## Response

### Success Response (200 OK)

Returns a Server-Sent Events stream.

```
event: RUN_STARTED
data: {"type": "RUN_STARTED", "threadId": "thread-123", "runId": "run-456"}

event: TEXT_MESSAGE_START
data: {"type": "TEXT_MESSAGE_START", "messageId": "msg-789"}

event: TEXT_MESSAGE_CONTENT
data: {"type": "TEXT_MESSAGE_CONTENT", "content": "Machine learning is"}

event: TEXT_MESSAGE_CONTENT
data: {"type": "TEXT_MESSAGE_CONTENT", "content": " a subset of AI..."}

event: TEXT_MESSAGE_END
data: {"type": "TEXT_MESSAGE_END"}

event: RUN_FINISHED
data: {"type": "RUN_FINISHED"}
```

### Event Types

| Event | Description |
|-------|-------------|
| `RUN_STARTED` | Agent run has started |
| `TEXT_MESSAGE_START` | Text message beginning |
| `TEXT_MESSAGE_CONTENT` | Streaming text content |
| `TEXT_MESSAGE_END` | Text message complete |
| `TOOL_CALL_START` | Tool call beginning |
| `TOOL_CALL_ARGS` | Tool call arguments |
| `TOOL_CALL_END` | Tool call complete |
| `RUN_FINISHED` | Agent run complete |
| `RUN_ERROR` | Error occurred |

## Example

### cURL

```bash
curl -X POST http://localhost:8000/agui \
  -H "Content-Type: application/json" \
  -H "Accept: text/event-stream" \
  -d '{"message": "Hello!"}'
```

### Python

```python
import requests

response = requests.post(
    "http://localhost:8000/agui",
    json={"message": "Hello!"},
    headers={"Accept": "text/event-stream"},
    stream=True
)

for line in response.iter_lines():
    if line:
        print(line.decode())
```

### JavaScript (EventSource)

```javascript
const response = await fetch("http://localhost:8000/agui", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
  },
  body: JSON.stringify({ message: "Hello!" }),
});

const reader = response.body.getReader();
const decoder = new TextDecoder();

while (true) {
  const { done, value } = await reader.read();
  if (done) break;
  console.log(decoder.decode(value));
}
```

## Error Responses

| Status | Description |
|--------|-------------|
| `400` | Bad request - missing message |
| `500` | Internal server error |

## See Also

- [AG-UI API Overview](/docs/api/praisonaiagents/agui/endpoints)
- [GET /status](/docs/api/praisonaiagents/agui/get-status)
