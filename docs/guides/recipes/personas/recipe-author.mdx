---
title: "Recipe Author Persona"
description: "Create and maintain PraisonAI recipes"
icon: "wand-magic-sparkles"
---

# Recipe Author Persona

<Callout type="info">
**Role**: Design, build, test, and document recipes that solve real-world problems for App Developers and end users.
</Callout>

## Primary Goals

- **Create effective recipes** that solve specific problems
- **Design clear interfaces** with well-defined inputs/outputs
- **Write comprehensive tests** for reliability
- **Document thoroughly** for easy adoption

## Recommended Knowledge

<CardGroup cols={2}>
  <Card title="All Integration Models" icon="diagram-project" href="/docs/guides/recipes/integration-models">
    Understand how recipes are consumed
  </Card>
  <Card title="Use Cases" icon="lightbulb" href="/docs/guides/recipes/use-cases">
    Learn from existing patterns
  </Card>
  <Card title="Decision Guide" icon="map" href="/docs/guides/recipes/decision-guide">
    Help users choose the right approach
  </Card>
  <Card title="App Developer Persona" icon="code" href="/docs/guides/recipes/personas/app-developer">
    Understand your users
  </Card>
</CardGroup>

## Typical Workflow

<Steps>
  <Step title="Define the Problem">
    ```yaml
    # Start with a clear problem statement
    # What task does this recipe automate?
    # Who is the target user?
    # What are the expected inputs and outputs?
    
    # Example: Support Reply Drafter
    # Problem: Support agents spend too much time drafting replies
    # User: Support team members
    # Input: Ticket ID, customer message
    # Output: Draft reply text
    ```
  </Step>
  
  <Step title="Create Recipe Structure">
    ```bash
    # Initialize recipe directory
    mkdir -p ~/.praison/templates/support-reply-drafter
    cd ~/.praison/templates/support-reply-drafter
    ```

    ```yaml
    # TEMPLATE.yaml
    name: support-reply-drafter
    version: "1.0.0"
    description: "Generate professional support reply drafts"
    author: "Your Name"
    license: "MIT"
    
    tags:
      - support
      - customer-service
      - text-generation
    
    requires:
      env:
        - OPENAI_API_KEY
      packages:
        - praisonaiagents
    
    inputs:
      ticket_id:
        type: string
        description: "Support ticket identifier"
        required: true
      message:
        type: string
        description: "Customer message to respond to"
        required: true
      tone:
        type: string
        description: "Response tone"
        default: "professional"
        enum: ["professional", "friendly", "formal"]
    
    outputs:
      reply:
        type: string
        description: "Generated reply draft"
      confidence:
        type: number
        description: "Confidence score (0-1)"
    
    cli:
      command: "praisonai recipe run support-reply-drafter"
      examples:
        - 'praisonai recipe run support-reply-drafter --input ''{"ticket_id": "T-123", "message": "I need help"}'''
    
    safety:
      dry_run_default: false
      requires_consent: false
    ```
  </Step>
  
  <Step title="Implement the Recipe">
    ```python
    # recipe.py
    from praisonaiagents import Agent, Task, PraisonAIAgents

    def run(input_data: dict, config: dict = None) -> dict:
        """
        Generate a support reply draft.
        
        Args:
            input_data: Contains ticket_id, message, and optional tone
            config: Optional configuration overrides
            
        Returns:
            Dict with reply and confidence score
        """
        ticket_id = input_data.get("ticket_id")
        message = input_data.get("message")
        tone = input_data.get("tone", "professional")
        
        # Create support agent
        support_agent = Agent(
            name="Support Specialist",
            role="Customer Support Expert",
            goal=f"Draft a {tone} reply to customer inquiries",
            instructions="""
            You are an expert customer support specialist.
            - Be helpful and empathetic
            - Address the customer's concern directly
            - Provide clear next steps if applicable
            - Keep responses concise but complete
            """,
        )
        
        # Create task
        task = Task(
            name="draft_reply",
            description=f"""
            Draft a {tone} reply to this customer message:
            
            Ticket: {ticket_id}
            Message: {message}
            
            Provide a professional, helpful response.
            """,
            expected_output="A well-crafted support reply",
            agent=support_agent,
        )
        
        # Execute
        agents = PraisonAIAgents(
            agents=[support_agent],
            tasks=[task],
        )
        
        result = agents.start()
        
        return {
            "reply": result.get("task_output", ""),
            "confidence": 0.85,  # Could be calculated from model response
        }
    ```
  </Step>
  
  <Step title="Write Tests">
    ```python
    # test_recipe.py
    import pytest
    from recipe import run

    def test_basic_reply():
        """Test basic reply generation."""
        result = run({
            "ticket_id": "T-123",
            "message": "I can't log into my account",
        })
        
        assert "reply" in result
        assert len(result["reply"]) > 50
        assert result["confidence"] > 0.5

    def test_tone_professional():
        """Test professional tone."""
        result = run({
            "ticket_id": "T-124",
            "message": "Your product is broken!",
            "tone": "professional",
        })
        
        assert "reply" in result
        # Should not contain informal language
        assert "hey" not in result["reply"].lower()

    def test_tone_friendly():
        """Test friendly tone."""
        result = run({
            "ticket_id": "T-125",
            "message": "How do I reset my password?",
            "tone": "friendly",
        })
        
        assert "reply" in result

    def test_missing_required_field():
        """Test error handling for missing fields."""
        with pytest.raises(ValueError):
            run({"ticket_id": "T-126"})  # Missing message

    @pytest.mark.integration
    def test_end_to_end():
        """Full integration test."""
        from praisonai import recipe
        
        result = recipe.run(
            "support-reply-drafter",
            input={
                "ticket_id": "T-127",
                "message": "I need a refund",
            }
        )
        
        assert result.ok
        assert result.output.get("reply")
    ```
  </Step>
  
  <Step title="Document the Recipe">
    Create a README.md with:
    
    - **Title and description** - What the recipe does
    - **Quick start** - Minimal example to get started
    - **Inputs table** - All parameters with types and descriptions
    - **Outputs table** - What the recipe returns
    - **Examples** - Multiple usage scenarios
    - **Requirements** - Dependencies and environment variables
    - **Troubleshooting** - Common issues and solutions
    
    Example README structure:
    
    ```text
    # Recipe Name
    
    Description of what the recipe does.
    
    ## Quick Start
    praisonai recipe run my-recipe --input '{"key": "value"}'
    
    ## Inputs
    | Field | Type | Required | Description |
    |-------|------|----------|-------------|
    | field1 | string | Yes | Description |
    
    ## Outputs
    | Field | Type | Description |
    |-------|------|-------------|
    | output1 | string | Description |
    
    ## Examples
    [Code examples for different use cases]
    
    ## Requirements
    - OPENAI_API_KEY environment variable
    - praisonaiagents package
    
    ## Troubleshooting
    Common issues and solutions
    ```
  </Step>
</Steps>

## Key Concerns

### Interface Design

```yaml
# Good: Clear, typed inputs with defaults
inputs:
  query:
    type: string
    required: true
    description: "Search query"
  max_results:
    type: integer
    default: 10
    minimum: 1
    maximum: 100
    description: "Maximum results to return"

# Bad: Vague, untyped inputs
inputs:
  data:
    description: "Input data"
```

### Error Handling

```python
def run(input_data: dict, config: dict = None) -> dict:
    """Recipe with proper error handling."""
    
    # Validate required inputs
    if not input_data.get("query"):
        raise ValueError("query is required")
    
    try:
        # Main logic
        result = process(input_data)
        return {"output": result, "ok": True}
        
    except RateLimitError:
        return {"error": "Rate limit exceeded, try again later", "ok": False}
    except InvalidInputError as e:
        return {"error": f"Invalid input: {e}", "ok": False}
    except Exception as e:
        # Log for debugging but don't expose internals
        logger.error(f"Recipe failed: {e}")
        return {"error": "An unexpected error occurred", "ok": False}
```

### Testing Strategy

```python
# Unit tests - fast, isolated
def test_input_validation():
    with pytest.raises(ValueError):
        run({})

# Integration tests - with real APIs
@pytest.mark.integration
def test_with_real_api():
    result = run({"query": "test"})
    assert result["ok"]

# Snapshot tests - for output consistency
def test_output_format(snapshot):
    result = run({"query": "hello"})
    assert result == snapshot
```

## Best Practices

### Recipe Naming

```
✅ Good names:
- support-reply-drafter
- code-review-assistant
- document-summarizer

❌ Bad names:
- my-recipe
- test123
- agent
```

### Version Management

```yaml
# Use semantic versioning
version: "1.2.3"
# 1 = major (breaking changes)
# 2 = minor (new features)
# 3 = patch (bug fixes)
```

### Dependency Management

```yaml
requires:
  packages:
    - praisonaiagents>=0.5.0  # Specify minimum versions
  env:
    - OPENAI_API_KEY  # Required
  optional_env:
    - LANGCHAIN_API_KEY  # Optional enhancement
```

## Troubleshooting

<Accordion title="Recipe not discovered">
Check recipe location:
```bash
# Recipes are discovered from:
ls ~/.praison/templates/
ls ~/.config/praison/templates/
ls ./.praison/templates/
```
</Accordion>

<Accordion title="Tests failing in CI">
- Ensure API keys are set in CI secrets
- Use mocks for unit tests
- Mark integration tests appropriately
</Accordion>

<Accordion title="Users report inconsistent outputs">
- Add temperature control to prompts
- Implement output validation
- Add retry logic for edge cases
</Accordion>

## Handoff Checklist

Before releasing a recipe:

- [ ] TEMPLATE.yaml is complete and valid
- [ ] All inputs have descriptions and types
- [ ] All outputs are documented
- [ ] README.md with examples
- [ ] Unit tests pass
- [ ] Integration tests pass
- [ ] Tested with all integration models (SDK, CLI, HTTP)
- [ ] Error messages are user-friendly
- [ ] Dependencies are specified with versions
- [ ] License is specified

## Next Steps

- [Integration Models](/docs/guides/recipes/integration-models) - How recipes are consumed
- [Use Cases](/docs/guides/recipes/use-cases) - Inspiration for new recipes
- [App Developer Persona](/docs/guides/recipes/personas/app-developer) - Understand your users
