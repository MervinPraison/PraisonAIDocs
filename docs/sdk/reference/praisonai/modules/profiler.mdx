---
title: "profiler"
description: "PraisonAI Profiler Module"
---

# praisonai.profiler

<Badge color="purple">Wrapper</Badge>

PraisonAI Profiler Module

Standardized profiling for performance monitoring across praisonai and praisonai-agents.

Features:
- Import timing
- Function execution timing
- Flow tracking
- File/module usage tracking
- Memory usage (tracemalloc)
- API call profiling (wall-clock time)
- Streaming profiling (TTFT, total time)
- Statistics (p50, p95, p99)
- cProfile integration
- Flamegraph generation
- Line-level profiling
- JSON/HTML export

Usage:
    from praisonai.profiler import Profiler, profile, profile_imports
    
    # Profile a function
    @profile
    def my_function():
        pass
    
    # Profile a block
    with Profiler.block("my_operation"):
        do_something()
    
    # Profile API calls
    with Profiler.api_call("https://api.example.com") as call:
        response = requests.get(...)
    
    # Profile streaming
    with Profiler.streaming("chat") as tracker:
        tracker.first_token()
        for chunk in stream:
            tracker.chunk()
    
    # Profile imports
    with profile_imports():
        import heavy_module
    
    # Get report with statistics
    Profiler.report()
    stats = Profiler.get_statistics()
    
    # Export
    Profiler.export_json()
    Profiler.export_html()

## Overview
This module provides components for profiler.

## Classes

**[Dedicated Page: TimingRecord](../classes/TimingRecord)**

### TimingRecord

Record of a single timing measurement.

<Accordion title="Properties">

| Property | Type |
|----------|------|
| `name` | `str` |
| `duration_ms` | `float` |
| `category` | `str` |
| `file` | `str` |
| `line` | `int` |
| `timestamp` | `float` |
</Accordion>


**[Dedicated Page: APICallRecord](../classes/APICallRecord)**

### APICallRecord

Record of an API/HTTP call.

<Accordion title="Properties">

| Property | Type |
|----------|------|
| `endpoint` | `str` |
| `method` | `str` |
| `duration_ms` | `float` |
| `status_code` | `int` |
| `request_size` | `int` |
| `response_size` | `int` |
| `timestamp` | `float` |
</Accordion>


**[Dedicated Page: StreamingRecord](../classes/StreamingRecord)**

### StreamingRecord

Record of streaming operation (LLM responses).

<Accordion title="Properties">

| Property | Type |
|----------|------|
| `name` | `str` |
| `ttft_ms` | `float` |
| `total_ms` | `float` |
| `chunk_count` | `int` |
| `total_tokens` | `int` |
| `timestamp` | `float` |
</Accordion>


**[Dedicated Page: MemoryRecord](../classes/MemoryRecord)**

### MemoryRecord

Record of memory usage.

<Accordion title="Properties">

| Property | Type |
|----------|------|
| `name` | `str` |
| `current_kb` | `float` |
| `peak_kb` | `float` |
| `timestamp` | `float` |
</Accordion>


**[Dedicated Page: ImportRecord](../classes/ImportRecord)**

### ImportRecord

Record of a module import.

<Accordion title="Properties">

| Property | Type |
|----------|------|
| `module` | `str` |
| `duration_ms` | `float` |
| `parent` | `str` |
| `timestamp` | `float` |
</Accordion>


**[Dedicated Page: FlowRecord](../classes/FlowRecord)**

### FlowRecord

Record of execution flow.

<Accordion title="Properties">

| Property | Type |
|----------|------|
| `step` | `int` |
| `name` | `str` |
| `file` | `str` |
| `line` | `int` |
| `duration_ms` | `float` |
| `timestamp` | `float` |
</Accordion>


**[Dedicated Page: StreamingTracker](../classes/StreamingTracker)**

### StreamingTracker

Track streaming operations (LLM responses).

Usage:
    tracker = StreamingTracker("chat")
    tracker.start()
    tracker.first_token()  # Mark TTFT
    for chunk in stream:
        tracker.chunk()
    tracker.end(total_tokens=100)

<Accordion title="Constructor Parameters">

| Parameter | Type | Required | Default |
|-----------|------|----------|---------|
| `name` | `str` | Yes | `-` |
</Accordion>

<Accordion title="Methods">
- **start**(``) → `None`
  Start tracking.
- **first_token**(``) → `None`
  Mark time to first token.
- **chunk**(``) → `None`
  Record a chunk received.
- **end**(`total_tokens: int`) → `None`
  End tracking and record to Profiler.
- **ttft_ms**(``) → `float`
  Get time to first token in ms.
- **elapsed_ms**(``) → `float`
  Get elapsed time in ms.
</Accordion>


**[Dedicated Page: Profiler](../classes/Profiler)**

### Profiler

Centralized profiler for performance monitoring.

Thread-safe singleton pattern for global access.

Features:
- Function/block timing
- API call profiling (wall-clock)
- Streaming profiling (TTFT)
- Memory profiling
- Import timing
- Statistics (p50, p95, p99)
- cProfile integration
- Export (JSON, HTML)


**[Dedicated Page: ImportProfiler](../classes/ImportProfiler)**

### ImportProfiler

Context manager to profile imports.

Usage:
    with profile_imports() as profiler:
        import heavy_module
    
    print(profiler.get_imports())

<Accordion title="Methods">
- **get_imports**(`min_duration_ms: float`) → `List`
  Get recorded imports.
- **get_slowest**(`n: int`) → `List`
  Get N slowest imports.
</Accordion>


## Functions

**[Dedicated Page: profile()](../functions/profile)**

### profile()

Decorator to profile a function.

Usage:
    @profile
    def my_function():
        pass
    
    @profile(category="api")
    def api_call():
        pass

```python
def profile(func: Optional[Callable]) -> Any
```

<Expandable title="Parameters">
- **func** (`Optional`)
</Expandable>


**[Dedicated Page: profile_async()](../functions/profile_async)**

### profile_async()

Decorator to profile an async function.

```python
def profile_async(func: Optional[Callable]) -> Any
```

<Expandable title="Parameters">
- **func** (`Optional`)
</Expandable>


**[Dedicated Page: profile_imports()](../functions/profile_imports)**

### profile_imports()

Create an import profiler context manager.

```python
def profile_imports() -> Any
```


**[Dedicated Page: profile_api()](../functions/profile_api)**

### profile_api()

Decorator to profile a function as an API call.

Usage:
    @profile_api(endpoint="openai/chat")
    def call_openai():
        pass

```python
def profile_api(func: Optional[Callable]) -> Any
```

<Expandable title="Parameters">
- **func** (`Optional`)
</Expandable>


**[Dedicated Page: profile_api_async()](../functions/profile_api_async)**

### profile_api_async()

Decorator to profile an async function as an API call.

```python
def profile_api_async(func: Optional[Callable]) -> Any
```

<Expandable title="Parameters">
- **func** (`Optional`)
</Expandable>


**[Dedicated Page: profile_detailed()](../functions/profile_detailed)**

### profile_detailed()

Decorator for detailed cProfile profiling.

Usage:
    @profile_detailed
    def heavy_computation():
        pass

```python
def profile_detailed(func: Optional[Callable]) -> Any
```

<Expandable title="Parameters">
- **func** (`Optional`)
</Expandable>


**[Dedicated Page: profile_lines()](../functions/profile_lines)**

### profile_lines()

Decorator for line-level profiling.

Note: Requires line_profiler package for full functionality.
Falls back to basic timing if not available.

Usage:
    @profile_lines
    def my_function():
        pass

```python
def profile_lines(func: Optional[Callable]) -> Any
```

<Expandable title="Parameters">
- **func** (`Optional`)
</Expandable>


**[Dedicated Page: time_import()](../functions/time_import)**

### time_import()

Time how long it takes to import a module.

Returns duration in milliseconds.

```python
def time_import(module_name: str) -> float
```

<Expandable title="Parameters">
- **module_name** (`str`)
</Expandable>


**[Dedicated Page: check_module_available()](../functions/check_module_available)**

### check_module_available()

Check if a module is available without importing it.

Uses importlib.util.find_spec which is fast.

```python
def check_module_available(module_name: str) -> bool
```

<Expandable title="Parameters">
- **module_name** (`str`)
</Expandable>

