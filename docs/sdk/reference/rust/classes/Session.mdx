---
title: "Session â€¢ Rust AI Agent SDK"
sidebarTitle: "Session"
description: "Session manager - main API for session persistence"
icon: "brackets-curly"
---

# Session

> Defined in the [**session**](../modules/session) module.

<Badge color="orange">Rust AI Agent SDK</Badge>

Session manager - main API for session persistence

## Fields

| Name | Type | Description |
|------|------|-------------|
| `session_id` | `String` | - |
| `data` | `SessionData` | - |
| `store` | `Arc&lt;dyn SessionStore&gt;` | - |

## Methods

### `new`

```rust
fn new(session_id: impl Into<String>) -> Self
```

Create a new session with default file store

**Parameters:**

| Name | Type |
|------|------|
| `session_id` | `impl Into&lt;String&gt;` |

### `with_store`

```rust
fn with_store(session_id: impl Into<String>, store: Arc<dyn SessionStore>) -> Self
```

Create with custom store

**Parameters:**

| Name | Type |
|------|------|
| `session_id` | `impl Into&lt;String&gt;` |
| `store` | `Arc&lt;dyn SessionStore&gt;` |

### `load`

```rust
fn load(session_id: impl Into<String>) -> Result<Self>
```

Load an existing session

**Parameters:**

| Name | Type |
|------|------|
| `session_id` | `impl Into&lt;String&gt;` |

### `id`

```rust
fn id(&self) -> &str
```

Get session ID

### `add_user_message`

```rust
fn add_user_message(&mut self, content: impl Into<String>) -> Result<()>
```

Add a user message

**Parameters:**

| Name | Type |
|------|------|
| `content` | `impl Into&lt;String&gt;` |

### `add_assistant_message`

```rust
fn add_assistant_message(&mut self, content: impl Into<String>) -> Result<()>
```

Add an assistant message

**Parameters:**

| Name | Type |
|------|------|
| `content` | `impl Into&lt;String&gt;` |

### `add_message`

```rust
fn add_message(&mut self, role: &str, content: impl Into<String>) -> Result<()>
```

Add a message with role

**Parameters:**

| Name | Type |
|------|------|
| `role` | `&str` |
| `content` | `impl Into&lt;String&gt;` |

### `get_history`

```rust
fn get_history(&self, max_messages: Option<usize>) -> Vec<Message>
```

Get chat history as LLM messages

**Parameters:**

| Name | Type |
|------|------|
| `max_messages` | `Option&lt;usize&gt;` |

### `messages`

```rust
fn messages(&self) -> &[SessionMessage]
```

Get all messages

### `message_count`

```rust
fn message_count(&self) -> usize
```

Get message count

### `set_agent_name`

```rust
fn set_agent_name(&mut self, name: impl Into<String>) -> Result<()>
```

Set agent name

**Parameters:**

| Name | Type |
|------|------|
| `name` | `impl Into&lt;String&gt;` |

### `set_user_id`

```rust
fn set_user_id(&mut self, user_id: impl Into<String>) -> Result<()>
```

Set user ID

**Parameters:**

| Name | Type |
|------|------|
| `user_id` | `impl Into&lt;String&gt;` |

### `clear`

```rust
fn clear(&mut self) -> Result<()>
```

Clear all messages

### `delete`

```rust
fn delete(self) -> Result<()>
```

Delete the session

### `exists`

```rust
fn exists(&self) -> bool
```

Check if session exists on disk

### `save`

```rust
fn save(&self) -> Result<()>
```

Save current state

