---
title: "Trace Context â€¢ Rust AI Agent SDK"
sidebarTitle: "Trace Context"
description: "TraceContext: Context for a trace."
icon: "brackets-curly"
---

# TraceContext

> Defined in the [**trace**](../modules/trace) module.

<Badge color="orange">Rust AI Agent SDK</Badge>

Context for a trace.

## Fields

| Name | Type | Description |
|------|------|-------------|
| `id` | `String` | Trace ID |
| `name` | `String` | Trace name |
| `start_time` | `Instant` | Start time |
| `spans` | `Vec&lt;Span&gt;` | All spans |
| `span_stack` | `Vec&lt;String&gt;` | Current span stack |
| `attributes` | `HashMap&lt;String` | Attributes |
| `serde_json` | `:Value&gt;` | Attributes |

## Methods

### `new`

```rust
fn new(name: impl Into<String>) -> Self
```

Create a new trace context.

**Parameters:**

| Name | Type |
|------|------|
| `name` | `impl Into&lt;String&gt;` |

### `elapsed`

```rust
fn elapsed(&self) -> Duration
```

Get elapsed time since trace start.

### `start_span`

```rust
fn start_span(&mut self, name: impl Into<String>, kind: SpanKind) -> String
```

Start a new span.

**Parameters:**

| Name | Type |
|------|------|
| `name` | `impl Into&lt;String&gt;` |
| `kind` | `SpanKind` |

### `end_span`

```rust
fn end_span(&mut self, span_id: &str) -> ()
```

End a span.

**Parameters:**

| Name | Type |
|------|------|
| `span_id` | `&str` |

### `current_span_id`

```rust
fn current_span_id(&self) -> Option<&str>
```

Get current span ID.

### `get_span`

```rust
fn get_span(&self, span_id: &str) -> Option<&Span>
```

Get a span by ID.

**Parameters:**

| Name | Type |
|------|------|
| `span_id` | `&str` |

### `get_span_mut`

```rust
fn get_span_mut(&mut self, span_id: &str) -> Option<&mut Span>
```

Get mutable span by ID.

**Parameters:**

| Name | Type |
|------|------|
| `span_id` | `&str` |

### `add_event`

```rust
fn add_event(&mut self, name: impl Into<String>) -> ()
```

Add event to current span.

**Parameters:**

| Name | Type |
|------|------|
| `name` | `impl Into&lt;String&gt;` |

### `set_attribute`

```rust
fn set_attribute(&mut self, key: impl Into<String>, value: impl Serialize) -> ()
```

Set attribute on current span.

**Parameters:**

| Name | Type |
|------|------|
| `key` | `impl Into&lt;String&gt;` |
| `value` | `impl Serialize` |

### `spans`

```rust
fn spans(&self) -> &[Span]
```

Get all spans.

### `span_count`

```rust
fn span_count(&self) -> usize
```

Get span count.

### `to_json`

```rust
fn to_json(&self) -> serde_json::Value
```

Export to JSON.

