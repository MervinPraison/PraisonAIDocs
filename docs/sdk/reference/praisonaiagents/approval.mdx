---
title: "approval"
description: "Human Approval Framework for PraisonAI Agents"
icon: "check-double"
---

# approval

<Badge color="blue">Core SDK</Badge>

Human Approval Framework for PraisonAI Agents

This module provides a minimal human-in-the-loop approval system for dangerous tool operations.
It extends the existing callback system to require human approval before executing high-risk tools.

## Import

```python
from praisonaiagents import approval
```

## Classes

### ToolPermission

Permission entry for a tool.

<Accordion title="Properties">

| Property | Type |
|----------|------|
| `tool_name` | `str` |
| `allowed_paths` | `List` |
| `session_only` | `bool` |
</Accordion>

### PermissionAllowlist

Persistent permission allowlist for tools.

Allows pre-approving tools and paths to skip interactive approval.
Can be saved/loaded from JSON for persistence across sessions.

Usage:
    allowlist = PermissionAllowlist()
    allowlist.add_tool("read_file")
    allowlist.add_tool("write_file", paths=["./src", "./tests"])
    
    if allowlist.is_allowed("read_file"):
        # Skip approval prompt
        pass

<Accordion title="Methods">
- **add_tool**(`tool_name: str, paths: Optional`) → `None`
  Add a tool to the allowlist.

Args:
    tool_name: Name of the tool to allow
   
- **remove_tool**(`tool_name: str`) → `bool`
  Remove a tool from the allowlist.
- **is_allowed**(`tool_name: str, path: Optional`) → `bool`
  Check if a tool is allowed.

Args:
    tool_name: Name of the tool
    path: Opt
- **is_empty**(``) → `bool`
  Check if allowlist is empty.
- **list_tools**(``) → `List`
  List all allowed tools.
- **clear_session_permissions**(``) → `None`
  Clear session-only permissions.
- **save**(`filepath: str`) → `None`
  Save allowlist to JSON file.
</Accordion>

### ApprovalDecision

Result of an approval request

<Accordion title="Constructor Parameters">

| Parameter | Type | Required | Default |
|-----------|------|----------|---------|
| `approved` | `bool` | Yes | `-` |
| `modified_args` | `Optional` | No | `None` |
| `reason` | `str` | No | `''` |
</Accordion>

## Functions

### get_permission_allowlist()

Get the global permission allowlist.

```python
def get_permission_allowlist() -> PermissionAllowlist
```

### set_permission_allowlist()

Set the global permission allowlist.

```python
def set_permission_allowlist(allowlist: PermissionAllowlist) -> None
```

<Expandable title="Parameters">
- **allowlist** (`PermissionAllowlist`)
</Expandable>

### set_approval_callback()

Set a custom approval callback function.

The callback should accept (function_name, arguments, risk_level) and return ApprovalDecision.

```python
def set_approval_callback(callback_fn: Callable) -> Any
```

<Expandable title="Parameters">
- **callback_fn** (`Callable`)
</Expandable>

### get_approval_callback()

Get the current approval callback function.

Returns the custom callback if set, otherwise None.
This should be used instead of directly accessing approval_callback
to ensure the latest callback is always used.

```python
def get_approval_callback() -> Optional[Callable]
```

### mark_approved()

Mark a tool as approved in the current context.

```python
def mark_approved(tool_name: str) -> Any
```

<Expandable title="Parameters">
- **tool_name** (`str`)
</Expandable>

### is_already_approved()

Check if a tool is already approved in the current context.

```python
def is_already_approved(tool_name: str) -> bool
```

<Expandable title="Parameters">
- **tool_name** (`str`)
</Expandable>

### clear_approval_context()

Clear the approval context.

```python
def clear_approval_context() -> Any
```

### require_approval()

Decorator to mark a tool as requiring human approval.

Args:
    risk_level: The risk level of the tool ("critical", "high", "medium", "low")

```python
def require_approval(risk_level: RiskLevel) -> Any
```

<Expandable title="Parameters">
- **risk_level** (`RiskLevel`)
</Expandable>

### console_approval_callback()

Default console-based approval callback.

Displays tool information and prompts user for approval via console.

```python
def console_approval_callback(function_name: str, arguments: Dict[str, Any], risk_level: str) -> ApprovalDecision
```

<Expandable title="Parameters">
- **function_name** (`str`)
- **arguments** (`Dict`)
- **risk_level** (`str`)
</Expandable>

### request_approval()

Request approval for a tool execution.

Args:
    function_name: Name of the function to execute
    arguments: Arguments to pass to the function
    
Returns:
    ApprovalDecision with approval status and any modifications

```python
async def request_approval(function_name: str, arguments: Dict[str, Any]) -> ApprovalDecision
```

<Expandable title="Parameters">
- **function_name** (`str`)
- **arguments** (`Dict`)
</Expandable>

### configure_default_approvals()

Configure default dangerous tools to require approval.

```python
def configure_default_approvals() -> Any
```

### add_approval_requirement()

Dynamically add approval requirement for a tool.

```python
def add_approval_requirement(tool_name: str, risk_level: RiskLevel) -> Any
```

<Expandable title="Parameters">
- **tool_name** (`str`)
- **risk_level** (`RiskLevel`)
</Expandable>

### remove_approval_requirement()

Remove approval requirement for a tool.

```python
def remove_approval_requirement(tool_name: str) -> Any
```

<Expandable title="Parameters">
- **tool_name** (`str`)
</Expandable>

### is_approval_required()

Check if a tool requires approval.

```python
def is_approval_required(tool_name: str) -> bool
```

<Expandable title="Parameters">
- **tool_name** (`str`)
</Expandable>

### get_risk_level()

Get the risk level of a tool.

```python
def get_risk_level(tool_name: str) -> Optional[str]
```

<Expandable title="Parameters">
- **tool_name** (`str`)
</Expandable>

## Constants

| Name | Value |
|------|-------|
| `DEFAULT_DANGEROUS_TOOLS` | `{'execute_command': 'critical', 'kill_process': 'critical', 'execute_code': 'critical', 'write_file': 'high', 'delete_file': 'high', 'move_file': 'high', 'copy_file': 'high', 'execute_query': 'high', ...` |
