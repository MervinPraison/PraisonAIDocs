---
title: "query_rewriter_agent"
description: "Query Rewriter Agent Module"
icon: "edit"
---

# query_rewriter_agent

<Badge color="blue">Core SDK</Badge>

Query Rewriter Agent Module

This module provides the QueryRewriterAgent class for transforming user queries
to improve retrieval quality in RAG applications.

Supported Rewriting Strategies:
- **BASIC**: Simple rephrasing for clarity and keyword optimization
- **HYDE**: Hypothetical Document Embeddings - generates a hypothetical answer
- **STEP_BACK**: Generates higher-level concept questions for complex queries
- **SUB_QUERIES**: Decomposes multi-part questions into focused sub-queries
- **MULTI_QUERY**: Generates multiple paraphrased versions for ensemble retrieval
- **CONTEXTUAL**: Uses conversation history to resolve references and context

## Import

```python
from praisonaiagents import query_rewriter_agent
```

## Classes

### RewriteStrategy

*Extends: Enum*

Enumeration of available query rewriting strategies.

### RewriteResult

Result of a query rewriting operation.

<Accordion title="Properties">

| Property | Type |
|----------|------|
| `original_query` | `str` |
| `rewritten_queries` | `List[str]` |
| `strategy_used` | `RewriteStrategy` |
| `hypothetical_document` | `Optional[str]` |
| `step_back_question` | `Optional[str]` |
| `sub_queries` | `Optional[List]` |
| `metadata` | `Dict[str, Any]` |

</Accordion>

<Accordion title="Methods">

- **primary_query**(``) → `str`
  Returns the primary rewritten query.
- **all_queries**(``) → `List[str]`
  Returns all queries including original and rewritten.

</Accordion>

### QueryRewriterAgent

Agent for rewriting queries to improve retrieval quality in RAG applications.

This agent transforms user queries using various strategies to bridge the gap
between how users ask questions and how information is stored in knowledge bases.

<Accordion title="Constructor Parameters">

| Parameter | Type | Required | Default |
|-----------|------|----------|---------|
| `name` | `str` | No | `QueryRewriterAgent` |
| `model` | `str` | No | `'gpt-4o-mini'` |
| `instructions` | `Optional[str]` | No | `None` |
| `verbose` | `bool` | No | `False` |
| `max_queries` | `int` | No | `5` |
| `abbreviations` | `Optional[Dict]` | No | `None` |
| `temperature` | `float` | No | `0.3` |
| `max_tokens` | `int` | No | `500` |
| `tools` | `Optional[List]` | No | `None` |

</Accordion>

<Accordion title="Methods">

- **agent**(``) → `Any`
  Lazy initialization of internal Agent.
- **rewrite**(`query`) → `RewriteResult`
  Rewrite a query using the specified strategy.
- **rewrite_basic**(`query: str`) → `RewriteResult`
  Convenience method for basic rewriting.
- **rewrite_hyde**(`query: str`) → `RewriteResult`
  Convenience method for HyDE rewriting.
- **rewrite_step_back**(`query: str`) → `RewriteResult`
  Convenience method for step-back rewriting.
- **rewrite_sub_queries**(`query: str`) → `RewriteResult`
  Convenience method for sub-query decomposition.
- **rewrite_multi_query**(`query: str, num_queries: int`) → `RewriteResult`
  Convenience method for multi-query generation.
- **rewrite_contextual**(`query`) → `RewriteResult`
  Convenience method for contextual rewriting.
- **add_abbreviation**(`abbrev: str, expansion: str`) → `None`
  Add a custom abbreviation expansion.
- **add_abbreviations**(`abbreviations`) → `None`
  Add multiple custom abbreviation expansions.

</Accordion>
