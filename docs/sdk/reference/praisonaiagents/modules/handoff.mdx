---
title: "handoff"
description: "Handoff functionality for agent-to-agent delegation."
icon: "handshake"
---

# praisonaiagents.agent.handoff

<Badge color="blue">Core SDK</Badge>

Handoff functionality for agent-to-agent delegation.

This module provides handoff capabilities that allow agents to delegate tasks
to other agents, similar to the OpenAI Agents SDK implementation.

Unified Handoff System:
- Handoff: LLM-driven (tool call) or programmatic agent-to-agent transfer
- HandoffConfig: Configuration for context policy, timeouts, concurrency, safety
- Replaces/absorbs Agent.delegate() and SubagentDelegator functionality

## Overview
This module provides components for handoff.

## Classes

**[Dedicated Page: ContextPolicy](../classes/ContextPolicy)**

### ContextPolicy

*Extends: Enum*

Policy for context sharing during handoff.


**[Dedicated Page: HandoffConfig](../classes/HandoffConfig)**

### HandoffConfig

Unified configuration for handoff behavior.

This consolidates all handoff-related settings including context policy,
timeouts, concurrency control, and safety features.

Attributes:
    context_policy: How to share context during handoff (default: summary for safety)
    max_context_tokens: Maximum tokens to include in context
    max_context_messages: Maximum messages to include (for LAST_N policy)
    preserve_system: Whether to preserve system messages in context
    timeout_seconds: Timeout for handoff execution
    max_concurrent: Maximum concurrent handoffs (0 = unlimited)
    detect_cycles: Enable cycle detection to prevent infinite loops
    max_depth: Maximum handoff chain depth
    async_mode: Enable async execution
    on_handoff: Callback when handoff starts
    on_complete: Callback when handoff completes
    on_error: Callback when handoff fails

<Accordion title="Properties">

| Property | Type |
|----------|------|
| `context_policy` | `ContextPolicy` |
| `max_context_tokens` | `int` |
| `max_context_messages` | `int` |
| `preserve_system` | `bool` |
| `timeout_seconds` | `float` |
| `max_concurrent` | `int` |
| `detect_cycles` | `bool` |
| `max_depth` | `int` |
| `async_mode` | `bool` |
| `on_handoff` | `Optional` |
| `on_complete` | `Optional` |
| `on_error` | `Optional` |
</Accordion>

<Accordion title="Methods">
- **to_dict**(``) → `Dict`
  Convert config to dictionary.
</Accordion>


**[Dedicated Page: HandoffError](../classes/HandoffError)**

### HandoffError

*Extends: Exception*

Base exception for handoff errors.


**[Dedicated Page: HandoffCycleError](../classes/HandoffCycleError)**

### HandoffCycleError

*Extends: HandoffError*

Raised when a cycle is detected in handoff chain.

<Accordion title="Constructor Parameters">

| Parameter | Type | Required | Default |
|-----------|------|----------|---------|
| `chain` | `List` | Yes | `-` |
</Accordion>


**[Dedicated Page: HandoffDepthError](../classes/HandoffDepthError)**

### HandoffDepthError

*Extends: HandoffError*

Raised when max handoff depth is exceeded.

<Accordion title="Constructor Parameters">

| Parameter | Type | Required | Default |
|-----------|------|----------|---------|
| `depth` | `int` | Yes | `-` |
| `max_depth` | `int` | Yes | `-` |
</Accordion>


**[Dedicated Page: HandoffTimeoutError](../classes/HandoffTimeoutError)**

### HandoffTimeoutError

*Extends: HandoffError*

Raised when handoff times out.

<Accordion title="Constructor Parameters">

| Parameter | Type | Required | Default |
|-----------|------|----------|---------|
| `timeout` | `float` | Yes | `-` |
| `agent_name` | `str` | Yes | `-` |
</Accordion>


**[Dedicated Page: HandoffInputData](../classes/HandoffInputData)**

### HandoffInputData

Data passed to a handoff target agent.

<Accordion title="Properties">

| Property | Type |
|----------|------|
| `messages` | `list` |
| `context` | `Dict` |
| `source_agent` | `Optional` |
| `handoff_depth` | `int` |
| `handoff_chain` | `List` |
</Accordion>


**[Dedicated Page: HandoffResult](../classes/HandoffResult)**

### HandoffResult

Result of a handoff operation.

<Accordion title="Properties">

| Property | Type |
|----------|------|
| `success` | `bool` |
| `response` | `Optional` |
| `target_agent` | `Optional` |
| `source_agent` | `Optional` |
| `duration_seconds` | `float` |
| `error` | `Optional` |
| `handoff_depth` | `int` |
</Accordion>


**[Dedicated Page: Handoff](../classes/Handoff)**

### Handoff

Represents a handoff configuration for delegating tasks to another agent.

Handoffs are represented as tools to the LLM, allowing agents to transfer
control to specialized agents for specific tasks.

This is the unified mechanism for agent-to-agent task transfer, supporting:
- LLM-driven handoffs (via tool calls)
- Programmatic handoffs (direct Python API)
- Async handoffs with concurrency control
- Cycle detection and depth limiting
- Configurable context policies

<Accordion title="Constructor Parameters">

| Parameter | Type | Required | Default |
|-----------|------|----------|---------|
| `agent` | `Agent` | Yes | `-` |
| `tool_name_override` | `Optional` | No | `None` |
| `tool_description_override` | `Optional` | No | `None` |
| `on_handoff` | `Optional` | No | `None` |
| `input_type` | `Optional` | No | `None` |
| `input_filter` | `Optional` | No | `None` |
| `config` | `Optional` | No | `None` |
</Accordion>

<Accordion title="Methods">
- **tool_name**(``) → `str`
  Get the tool name for this handoff.
- **tool_description**(``) → `str`
  Get the tool description for this handoff.
- **default_tool_name**(``) → `str`
  Generate default tool name based on agent name.
- **default_tool_description**(``) → `str`
  Generate default tool description based on agent role and goal.
- **execute_programmatic**(`source_agent: Agent, prompt: str, context: Optional`) → `HandoffResult`
  Execute handoff programmatically (not via LLM tool call).

This is the unified p
- **async execute_async**(`source_agent: Agent, prompt: str, context: Optional`) → `HandoffResult`
  Execute handoff asynchronously with concurrency control.
- **to_tool_function**(`source_agent: Agent`) → `Callable`
  Convert this handoff to a tool function that can be called by the LLM.
</Accordion>


**[Dedicated Page: handoff_filters](../classes/handoff_filters)**

### handoff_filters

Common handoff input filters.

<Accordion title="Methods">
- **remove_all_tools**(`data: HandoffInputData`) → `HandoffInputData`
  Remove all tool calls from the message history.
- **keep_last_n_messages**(`n: int`) → `Callable`
  Keep only the last n messages in the history.
- **remove_system_messages**(`data: HandoffInputData`) → `HandoffInputData`
  Remove all system messages from the history.
</Accordion>


## Functions

**[Dedicated Page: handoff()](../functions/handoff)**

### handoff()

Create a handoff configuration for delegating tasks to another agent.

This is a convenience function that creates a Handoff instance with the
specified configuration. It supports both the legacy API and the new
unified HandoffConfig.

```python
def handoff(agent: 'Agent', tool_name_override: Optional[str], tool_description_override: Optional[str], on_handoff: Optional[Callable], input_type: Optional[type], input_filter: Optional[Callable[[HandoffInputData], HandoffInputData]], config: Optional[HandoffConfig], context_policy: Optional[str], timeout_seconds: Optional[float], max_concurrent: Optional[int], detect_cycles: Optional[bool], max_depth: Optional[int]) -> Handoff
```

<Expandable title="Parameters">
- **agent** (`Agent`)
  The target agent to hand off to
- **tool_name_override** (`Optional`)
  Custom tool name (defaults to transfer_to_&lt;agent_name&gt;)
- **tool_description_override** (`Optional`)
  Custom tool description
- **on_handoff** (`Optional`)
  Callback function executed when handoff is invoked
- **input_type** (`Optional`)
  Type of input expected by the handoff (for structured data)
- **input_filter** (`Optional`)
  Function to filter/transform input before passing to target agent
- **config** (`Optional`)
  HandoffConfig for advanced settings
- **context_policy** (`Optional`)
  Shorthand for config.context_policy ("full", "summary", "none", "last_n")
- **timeout_seconds** (`Optional`)
  Shorthand for config.timeout_seconds
- **max_concurrent** (`Optional`)
  Shorthand for config.max_concurrent
- **detect_cycles** (`Optional`)
  Shorthand for config.detect_cycles
- **max_depth** (`Optional`)
  Shorthand for config.max_depth
</Expandable>


**[Dedicated Page: prompt_with_handoff_instructions()](../functions/prompt_with_handoff_instructions)**

### prompt_with_handoff_instructions()

Add handoff instructions to an agent's prompt.

```python
def prompt_with_handoff_instructions(base_prompt: str, agent: 'Agent') -> str
```

<Expandable title="Parameters">
- **base_prompt** (`str`)
  The original prompt/instructions
- **agent** (`Agent`)
  The agent that will use handoffs
</Expandable>


## Constants

| Name | Value |
|------|-------|
| `RECOMMENDED_PROMPT_PREFIX` | `'You have the ability to transfer tasks to specialized agents when appropriate. \nWhen you determine that a task would be better handled by another agent with specific expertise, \nuse the transfer to...` |
