---
title: "handoff"
description: "Handoff functionality for agent-to-agent delegation."
icon: "arrow-right-left"
---

# handoff

<Badge color="blue">Core SDK</Badge>

Handoff functionality for agent-to-agent delegation.

This module provides handoff capabilities that allow agents to delegate tasks
to other agents, similar to the OpenAI Agents SDK implementation.

Unified Handoff System:
- Handoff: LLM-driven (tool call) or programmatic agent-to-agent transfer
- HandoffConfig: Configuration for context policy, timeouts, concurrency, safety
- Replaces/absorbs Agent.delegate() and SubagentDelegator functionality

## Import

```python
from praisonaiagents import handoff
```

## Classes

### ContextPolicy

*Extends: Enum*

Policy for context sharing during handoff.

### HandoffConfig

Unified configuration for handoff behavior.

This consolidates all handoff-related settings including context policy,
timeouts, concurrency control, and safety features.

<Accordion title="Properties">

| Property | Type |
|----------|------|
| `context_policy` | `ContextPolicy` |
| `max_context_tokens` | `int` |
| `max_context_messages` | `int` |
| `preserve_system` | `bool` |
| `timeout_seconds` | `float` |
| `max_concurrent` | `int` |
| `detect_cycles` | `bool` |
| `max_depth` | `int` |
| `async_mode` | `bool` |
| `on_handoff` | `Optional` |
| `on_complete` | `Optional` |
| `on_error` | `Optional` |

</Accordion>

<Accordion title="Methods">

- **to_dict**(``) → `Dict[str, Any]`
  Convert config to dictionary.

</Accordion>

### HandoffError

*Extends: Exception*

Base exception for handoff errors.

### HandoffCycleError

*Extends: HandoffError*

Raised when a cycle is detected in handoff chain.

<Accordion title="Constructor Parameters">

| Parameter | Type | Required | Default |
|-----------|------|----------|---------|
| `chain` | `List[str]` | Yes | `-` |

</Accordion>

### HandoffDepthError

*Extends: HandoffError*

Raised when max handoff depth is exceeded.

<Accordion title="Constructor Parameters">

| Parameter | Type | Required | Default |
|-----------|------|----------|---------|
| `depth` | `int` | Yes | `-` |
| `max_depth` | `int` | Yes | `-` |

</Accordion>

### HandoffTimeoutError

*Extends: HandoffError*

Raised when handoff times out.

<Accordion title="Constructor Parameters">

| Parameter | Type | Required | Default |
|-----------|------|----------|---------|
| `timeout` | `float` | Yes | `-` |
| `agent_name` | `str` | Yes | `-` |

</Accordion>

### HandoffInputData

Data passed to a handoff target agent.

<Accordion title="Properties">

| Property | Type |
|----------|------|
| `messages` | `list` |
| `context` | `Dict[str, Any]` |
| `source_agent` | `Optional[str]` |
| `handoff_depth` | `int` |
| `handoff_chain` | `List[str]` |

</Accordion>

### HandoffResult

Result of a handoff operation.

<Accordion title="Properties">

| Property | Type |
|----------|------|
| `success` | `bool` |
| `response` | `Optional[str]` |
| `target_agent` | `Optional[str]` |
| `source_agent` | `Optional[str]` |
| `duration_seconds` | `float` |
| `error` | `Optional[str]` |
| `handoff_depth` | `int` |

</Accordion>

### Handoff

Represents a handoff configuration for delegating tasks to another agent.

Handoffs are represented as tools to the LLM, allowing agents to transfer
control to specialized agents for specific tasks.

This is the unified mechanism for agent-to-agent task transfer, supporting:
- LLM-driven handoffs (via tool calls)
- Programmatic handoffs (direct Python API)
- Async handoffs with concurrency control
- Cycle detection and depth limiting
- Configurable context policies

<Accordion title="Constructor Parameters">

| Parameter | Type | Required | Default |
|-----------|------|----------|---------|
| `agent` | `Agent` | Yes | `-` |
| `tool_name_override` | `Optional[str]` | No | `None` |
| `tool_description_override` | `Optional[str]` | No | `None` |
| `on_handoff` | `Optional` | No | `None` |
| `input_type` | `Optional` | No | `None` |
| `input_filter` | `Optional` | No | `None` |
| `config` | `Optional` | No | `None` |

</Accordion>

<Accordion title="Methods">

- **tool_name**(``) → `str`
  Get the tool name for this handoff.
- **tool_description**(``) → `str`
  Get the tool description for this handoff.
- **default_tool_name**(``) → `str`
  Generate default tool name based on agent name.
- **default_tool_description**(``) → `str`
  Generate default tool description based on agent role and goal.
- **execute_programmatic**(`source_agent`) → `HandoffResult`
  Execute handoff programmatically (not via LLM tool call).
- **async execute_async**(`source_agent`) → `HandoffResult`
  Execute handoff asynchronously with concurrency control.
- **to_tool_function**(`source_agent: Agent`) → `Callable`
  Convert this handoff to a tool function that can be called by the LLM.

</Accordion>

### handoff_filters

Common handoff input filters.

<Accordion title="Methods">

- **remove_all_tools**(`data: HandoffInputData`) → `HandoffInputData`
  Remove all tool calls from the message history.
- **keep_last_n_messages**(`n: int`) → `Callable`
  Keep only the last n messages in the history.
- **remove_system_messages**(`data: HandoffInputData`) → `HandoffInputData`
  Remove all system messages from the history.

</Accordion>

## Functions

### handoff()

Create a handoff configuration for delegating tasks to another agent.

This is a convenience function that creates a Handoff instance with the
specified configuration. It supports both the legacy API and the new
unified HandoffConfig.

```python
def handoff(agent) -> Handoff
```

<Expandable title="Parameters">

- **agent** (`Agent`)
- **tool_name_override** (`Optional[str]`)
- **tool_description_override** (`Optional[str]`)
- **on_handoff** (`Optional`)
- **input_type** (`Optional`)
- **input_filter** (`Optional`)
- **config** (`Optional`)
- **context_policy** (`Optional[str]`)
- **timeout_seconds** (`Optional[float]`)
- **max_concurrent** (`Optional[int]`)
- **detect_cycles** (`Optional[bool]`)
- **max_depth** (`Optional[int]`)

</Expandable>

### prompt_with_handoff_instructions()

Add handoff instructions to an agent's prompt.

```python
def prompt_with_handoff_instructions(base_prompt: str, agent: Agent) -> str
```

<Expandable title="Parameters">

- **base_prompt** (`str`)
- **agent** (`Agent`)

</Expandable>

## Constants

| Name | Value |
|------|-------|
| `RECOMMENDED_PROMPT_PREFIX` | `'You have the ability to transfer tasks to special` |
