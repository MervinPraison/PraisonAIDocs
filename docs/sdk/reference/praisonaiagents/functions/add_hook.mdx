---
title: "add_hook"
description: "API documentation for add_hook"
icon: "function"
---

# add_hook

*Module: [registry](../modules/registry)*

Register a hook callback. Simplified API.

Accepts both string event names and HookEvent enums:
    add_hook('before_tool', my_callback)  # String
    add_hook(HookEvent.BEFORE_TOOL, my_callback)  # Enum

Can also be used as a decorator:
    @add_hook('before_tool')
    def my_hook(data):
        return HookResult.allow()

Args:
    event: Hook event name ('before_tool', 'after_llm', etc.) or HookEvent enum
    callback: Function to call when hook fires (optional when using as decorator)
    priority: Execution order (lower = earlier). Default 10. (Reserved for future use)
    matcher: Optional regex pattern to match specific targets (e.g., tool names)
    
Returns:
    Hook ID for later removal, or a decorator function if callback is None
    
Raises:
    ValueError: If event string is not a valid HookEvent

## Signature

```python
def add_hook(event: Union[str, HookEvent], callback: Optional[Callable[[HookInput], HookResult]], priority: int, matcher: Optional[str]) -> Union[str, Callable]
```

## Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `event` | `Union` | - |
| `callback` | `Optional` | - |
| `priority` | `int` | - |
| `matcher` | `Optional` | - |

## Returns

Type: `Union[str, Callable]`
