---
title: "emergency_truncate"
description: "Emergency truncation when optimization isn't enough."
icon: "function"
---


<div className="flex items-center gap-2">
  <Badge color="purple">Method</Badge>
</div>

> This is a method of the [**ContextManager**](../classes/ContextManager) class in the [**manager**](../modules/manager) module.

Emergency truncation when optimization isn't enough.

Aggressively removes messages to fit within target tokens.
Preserves system messages and most recent turns.

## Signature

```python
def emergency_truncate(messages: List[Dict[str, Any]], target_tokens: int) -> List[Dict[str, Any]]
```

## Parameters

<ParamField query="messages" type="List" required={true}>
  Messages to truncate
</ParamField>

<ParamField query="target_tokens" type="int" required={true}>
  Target token count
</ParamField>

### Returns

<ResponseField name="Returns" type="List[Dict[str, Any]]">
  Truncated messages list
</ResponseField>
