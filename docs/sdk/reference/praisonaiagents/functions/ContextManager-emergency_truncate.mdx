---
title: "Emergency Truncate â€¢ AI Agent SDK"
sidebarTitle: "Emergency Truncate"
description: "emergency_truncate: Emergency truncation when optimization isn't enough."
icon: "function"
---

# emergency_truncate

<div className="flex items-center gap-2">
  <Badge color="purple">Method</Badge>
</div>

> This is a method of the [**ContextManager**](../classes/ContextManager) class in the [**manager**](../modules/manager) module.

Emergency truncation when optimization isn't enough.

Aggressively removes messages to fit within target tokens.
Preserves system messages and most recent turns.

## Signature

```python
def emergency_truncate(messages: List[Dict[str, Any]], target_tokens: int) -> List[Dict[str, Any]]
```

## Parameters

<ParamField query="messages" type="List" required={true}>
  Messages to truncate
</ParamField>

<ParamField query="target_tokens" type="int" required={true}>
  Target token count
</ParamField>

### Returns

<ResponseField name="Returns" type="List[Dict[str, Any]]">
  Truncated messages list
</ResponseField>


## Uses

- `estimate_messages_tokens`
- `estimate_message_tokens`


## Source

<Card title="View on GitHub" icon="github" href="https://github.com/MervinPraison/PraisonAI/blob/main/src/praisonai-agents/praisonaiagents/context/manager.py#L866">
  `praisonaiagents/context/manager.py` at line 866
</Card>
