---
title: "ContextManager"
description: "Class reference for ContextManager"
icon: "brackets-curly"
---

# ContextManager

*Module: [manager](../modules/manager)*

Unified facade for context management.

Orchestrates budgeting, composition, optimization, and monitoring.
Provides hooks for exact LLM boundary snapshots.
Tracks optimization history for debugging.

Example:
    manager = ContextManager(model="gpt-4o")
    
    # Process messages before LLM call
    result = manager.process(
        messages=messages,
        system_prompt=system_prompt,
        tools=tools,
    )
    
    # Get optimized messages
    optimized_messages = result["messages"]
    
    # Check if optimization occurred
    if result["optimized"]:
        print(f"Saved &#123;result['tokens_saved']&#125; tokens")

## Constructor

| Parameter | Type | Required | Default |
|-----------|------|----------|---------|
| `model` | `str` | No | `'gpt-4o-mini'` |
| `config` | `Optional` | No | `None` |
| `session_id` | `str` | No | `''` |
| `agent_name` | `str` | No | `''` |
| `session_cache` | `Optional` | No | `None` |
| `llm_summarize_fn` | `Optional` | No | `None` |

## Methods

- [process()](../functions/ContextManager-process)
- [capture_llm_boundary()](../functions/ContextManager-capture_llm_boundary)
- [register_snapshot_callback()](../functions/ContextManager-register_snapshot_callback)
- [get_last_snapshot_hook()](../functions/ContextManager-get_last_snapshot_hook)
- [estimate_tokens()](../functions/ContextManager-estimate_tokens)
- [get_tool_budget()](../functions/ContextManager-get_tool_budget)
- [set_tool_budget()](../functions/ContextManager-set_tool_budget)
- [truncate_tool_output()](../functions/ContextManager-truncate_tool_output)
- [get_history()](../functions/ContextManager-get_history)
- [get_stats()](../functions/ContextManager-get_stats)
- [emergency_truncate()](../functions/ContextManager-emergency_truncate)
- [get_resolved_config()](../functions/ContextManager-get_resolved_config)
- [reset()](../functions/ContextManager-reset)
