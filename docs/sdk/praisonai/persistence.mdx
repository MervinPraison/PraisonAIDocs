---
title: "Persistence Module"
description: "Database persistence and session management for PraisonAI"
icon: "database"
---

# Persistence Module

The Persistence module provides database adapters and session management for storing agent conversations, runs, and traces.

## Installation

```bash
pip install praisonai

# For specific database support
pip install "praisonai[postgres]"
pip install "praisonai[redis]"
```

## Quick Start

```python
from praisonaiagents import Agent, db

agent = Agent(
    name="Assistant",
    instructions="You are helpful.",
    db=db(database_url="postgresql://localhost/mydb")
)

response = agent.chat("Hello!")
```

## Supported Databases

### Conversation Stores

| Database | Install | URL Format |
|----------|---------|------------|
| PostgreSQL | `pip install "praisonai[postgres]"` | `postgresql://user:pass@host/db` |
| MySQL | `pip install "praisonai[mysql]"` | `mysql://user:pass@host/db` |
| SQLite | Built-in | `sqlite:///path/to/db.sqlite` |
| JSON | Built-in | `json:///path/to/data.json` |

### Knowledge Stores (Vector)

| Database | Install |
|----------|---------|
| Qdrant | `pip install "praisonai[qdrant]"` |
| Chroma | `pip install "praisonai[chroma]"` |
| Pinecone | `pip install "praisonai[pinecone]"` |
| PGVector | `pip install "praisonai[pgvector]"` |

### State Stores

| Database | Install |
|----------|---------|
| Redis | `pip install "praisonai[redis]"` |
| MongoDB | `pip install "praisonai[mongodb]"` |

## Database Adapters

### PostgreSQL

```python
from praisonaiagents import Agent, db

agent = Agent(
    name="Assistant",
    db=db.PostgresDB(
        database_url="postgresql://user:pass@localhost/mydb"
    )
)
```

### SQLite

```python
from praisonaiagents import Agent, db

agent = Agent(
    name="Assistant",
    db=db.SQLiteDB(database_path="./agent.db")
)
```

### Redis

```python
from praisonaiagents import Agent, db

agent = Agent(
    name="Assistant",
    db=db.RedisDB(redis_url="redis://localhost:6379")
)
```

## Session Management

```python
from praisonaiagents import Agent, Session

# Create session
session = Session(session_id="user-123")

agent = Agent(
    name="Assistant",
    session=session
)

# Conversations persist across runs
agent.chat("Remember my name is Alice")
# Later...
agent.chat("What's my name?")  # Remembers "Alice"
```

## Data Models

### DbMessage

Stored message format:

```python
{
    "id": "msg-uuid",
    "session_id": "session-123",
    "agent_id": "agent-name",
    "role": "user",  # or "assistant"
    "content": "Message content",
    "timestamp": "2024-01-01T00:00:00Z"
}
```

### DbRun

Execution run record:

```python
{
    "id": "run-uuid",
    "session_id": "session-123",
    "agent_id": "agent-name",
    "status": "completed",
    "started_at": "2024-01-01T00:00:00Z",
    "completed_at": "2024-01-01T00:00:01Z"
}
```

### DbToolCall

Tool execution record:

```python
{
    "id": "tool-uuid",
    "run_id": "run-uuid",
    "tool_name": "search",
    "arguments": {"query": "AI news"},
    "result": "Search results...",
    "timestamp": "2024-01-01T00:00:00Z"
}
```

## See Also

- [Database Module](/docs/sdk/praisonaiagents/db/db) - Core database adapters
- [Session Module](/docs/sdk/praisonaiagents/session) - Session management
- [Memory Module](/docs/sdk/praisonaiagents/memory/memory) - Agent memory
